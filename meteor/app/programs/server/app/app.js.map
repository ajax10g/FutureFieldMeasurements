{"version":3,"sources":["meteor://ðŸ’»app/lib/number_utils.js","meteor://ðŸ’»app/lib/object_utils.js","meteor://ðŸ’»app/lib/string_utils.js","meteor://ðŸ’»app/both/collections/ethercat.js","meteor://ðŸ’»app/both/collections/ethercatunits.js","meteor://ðŸ’»app/both/collections/gpio.js","meteor://ðŸ’»app/both/collections/mbus.js","meteor://ðŸ’»app/both/collections/modbusrtu.js","meteor://ðŸ’»app/both/collections/modbusrturead.js","meteor://ðŸ’»app/both/collections/modbustcp.js","meteor://ðŸ’»app/both/collections/modbustcpread.js","meteor://ðŸ’»app/both/collections/modbustcpreadcommand.js","meteor://ðŸ’»app/both/collections/onewire.js","meteor://ðŸ’»app/both/collections/signals.js","meteor://ðŸ’»app/server/collections/ethercat.js","meteor://ðŸ’»app/server/collections/ethercatunits.js","meteor://ðŸ’»app/server/collections/gpio.js","meteor://ðŸ’»app/server/collections/mbus.js","meteor://ðŸ’»app/server/collections/modbusrtu.js","meteor://ðŸ’»app/server/collections/modbusrturead.js","meteor://ðŸ’»app/server/collections/modbustcp.js","meteor://ðŸ’»app/server/collections/modbustcpread.js","meteor://ðŸ’»app/server/collections/modbustcpreadcommand.js","meteor://ðŸ’»app/server/collections/onewire.js","meteor://ðŸ’»app/server/collections/signals.js","meteor://ðŸ’»app/server/controllers/router.js","meteor://ðŸ’»app/server/publish/ethercat.js","meteor://ðŸ’»app/server/publish/ethercatunits.js","meteor://ðŸ’»app/server/publish/gpio.js","meteor://ðŸ’»app/server/publish/mbus.js","meteor://ðŸ’»app/server/publish/modbusrtu.js","meteor://ðŸ’»app/server/publish/modbusrturead.js","meteor://ðŸ’»app/server/publish/modbustcp.js","meteor://ðŸ’»app/server/publish/modbustcpread.js","meteor://ðŸ’»app/server/publish/modbustcpreadcommand.js","meteor://ðŸ’»app/server/publish/onewire.js","meteor://ðŸ’»app/server/publish/signals.js","meteor://ðŸ’»app/server/server.js"],"names":[],"mappings":";;;;;;;;AAAA,KAAK,OAAL,GAAe,UAAS,CAAT,EAAY;AACvB,WAAO,MAAM,CAAC,CAAP,IAAY,OAAO,IAAE,CAAT,CAAnB;AACH,CAFD;;AAIA,KAAK,SAAL,GAAiB,UAAS,CAAT,EAAY;AACzB,WAAO,MAAM,CAAC,CAAP,IAAY,OAAO,IAAE,CAAT,CAAnB;AACH,CAFD,oH;;;;;;;;;;;;;;;;;;;ACIA,KAAK,gBAAL,GAAwB,UAAS,YAAT,EAAuB,GAAvB,EAA4B;AACnD,QAAO,aAAa,KAAb,CAAmB,GAAnB,EAAwB,MAAxB,CAA+B,UAAS,CAAT,EAAY,CAAZ,EAAe;AAAE,SAAO,EAAE,CAAF,CAAP;AAAc,EAA9D,EAAgE,GAAhE,CAAP;AACA,CAFD;;;;;;AASA,KAAK,MAAL,GAAc,UAAS,CAAT,EAAY;AACzB,KAAI,KAAK,EAAT;AAAA,KAAa,CAAb;AAAA,KAAgB,KAAhB;AAAA,KAAuB,IAAvB;AACA,MAAK,IAAI,CAAT,IAAc,CAAd,EAAiB;AAChB,MAAI,EAAJ;AACA,UAAQ,EAAE,KAAF,CAAQ,GAAR,CAAR;AACA,MAAI,MAAM,MAAM,GAAN,EAAV;AACA,SAAO,MAAM,MAAb,EAAqB;AACpB,UAAO,MAAM,KAAN,EAAP;AACA,OAAI,EAAE,IAAF,IAAU,EAAE,IAAF,KAAW,EAAzB;AACA;AACD,IAAE,GAAF,IAAS,EAAE,CAAF,CAAT;AACA;AACD,QAAO,EAAP;AACA,CAbD;;;;;;;;;AAsBA,KAAK,qBAAL,GAA6B,UAAS,IAAT,EAAe,YAAf,EAA6B,QAA7B,EAAuC;AACnE,QAAO,QAAQ,EAAf;AACA,YAAW,YAAY,KAAvB;AACA,gBAAe,gBAAgB,EAA/B;;AAEA,KAAI,MAAM,EAAV;;AAEA,KAAG,YAAY,MAAf,EAAuB;;AAEtB,MAAI,MAAM,EAAV;AACA,IAAE,IAAF,CAAO,IAAP,EAAa,UAAS,GAAT,EAAc;AAC1B,OAAI,MAAM,EAAV;AACA,KAAE,IAAF,CAAO,YAAP,EAAqB,UAAS,KAAT,EAAgB;AACpC,QAAI,KAAJ,IAAa,IAAI,KAAJ,CAAb;AACA,IAFD;AAGA,OAAI,IAAJ,CAAS,GAAT;AACA,GAND;;AAQA,QAAM,KAAK,SAAL,CAAe,GAAf,CAAN;AACA;;;AAGD,KAAG,YAAY,KAAZ,IAAqB,YAAY,KAApC,EAA2C;AAC1C,MAAI,kBAAkB,EAAtB;AACA,MAAG,YAAY,KAAf,EAAsB;AACrB,qBAAkB,GAAlB;AACA;AACD,MAAG,YAAY,KAAf,EAAsB;AACrB,qBAAkB,IAAlB;AACA;;AAED,IAAE,IAAF,CAAO,YAAP,EAAqB,UAAS,KAAT,EAAgB,CAAhB,EAAmB;AACvC,OAAG,IAAI,CAAP,EAAU;AACT,UAAM,MAAM,eAAZ;AACA;AACD,SAAM,MAAM,IAAN,GAAa,KAAb,GAAqB,IAA3B;AACA,GALD;AAMA,QAAM,MAAM,MAAZ;;AAEA,IAAE,IAAF,CAAO,IAAP,EAAa,UAAS,GAAT,EAAc;AAC1B,KAAE,IAAF,CAAO,YAAP,EAAqB,UAAS,KAAT,EAAgB,CAAhB,EAAmB;AACvC,QAAG,IAAI,CAAP,EAAU;AACT,WAAM,MAAM,eAAZ;AACA;;AAED,QAAI,QAAQ,iBAAiB,KAAjB,EAAwB,GAAxB,IAA+B,EAA3C;AACA,YAAQ,MAAM,OAAN,CAAc,IAAd,EAAoB,IAApB,CAAR;AACA,QAAG,OAAO,KAAP,IAAiB,WAApB,EACC,MAAM,MAAM,MAAZ,CADD,KAGC,MAAM,MAAM,IAAN,GAAa,KAAb,GAAqB,IAA3B;AACD,IAXD;AAYA,SAAM,MAAM,MAAZ;AACA,GAdD;AAeA;;AAED,QAAO,GAAP;AACA,CAzDD,qH;;;;;;;;;;;ACvCA,KAAK,WAAL,GAAmB,UAAU,MAAV,EAAkB;AACpC,QAAO,OAAO,OAAP,CAAe,6BAAf,EAA8C,MAA9C,CAAP;AACA,CAFD;;AAIA,KAAK,iBAAL,GAAyB,UAAS,MAAT,EAAiB,IAAjB,EAAuB,OAAvB,EAAgC;AACxD,QAAO,OAAO,OAAP,CAAe,IAAI,MAAJ,CAAW,YAAY,IAAZ,CAAX,EAA8B,GAA9B,CAAf,EAAmD,OAAnD,CAAP;AACA,CAFD;;AAIA,KAAK,WAAL,GAAmB,UAAS,WAAT,EAAsB,IAAtB,EAA4B;AAC9C,KAAI,MAAM,QAAQ,IAAlB;AACA,KAAI,MAAM,EAAV;AACA,GAAE,IAAF,CAAO,WAAP,EAAoB,UAAS,GAAT,EAAc;AACjC,MAAG,GAAH,EAAQ;AACP,OAAG,GAAH,EACC,MAAM,MAAM,GAAZ;AACD,SAAM,MAAM,GAAZ;AACA;AACD,EAND;AAOA,QAAO,GAAP;AACA,CAXD,qH;;;;;;;;;;;ACRA,KAAK,QAAL,GAAgB,IAAI,MAAM,UAAV,CAAqB,UAArB,CAAhB;;AAEA,KAAK,QAAL,CAAc,aAAd,GAA8B,UAAS,MAAT,EAAiB,GAAjB,EAAsB;AACnD,QAAO,IAAP;AACA,CAFD;;AAIA,KAAK,QAAL,CAAc,aAAd,GAA8B,UAAS,MAAT,EAAiB,GAAjB,EAAsB;AACnD,QAAO,IAAP;AACA,CAFD;;AAIA,KAAK,QAAL,CAAc,aAAd,GAA8B,UAAS,MAAT,EAAiB,GAAjB,EAAsB;AACnD,QAAO,IAAP;AACA,CAFD,qH;;;;;;;;;;;ACVA,KAAK,aAAL,GAAqB,IAAI,MAAM,UAAV,CAAqB,eAArB,CAArB;;AAEA,KAAK,aAAL,CAAmB,aAAnB,GAAmC,UAAS,MAAT,EAAiB,GAAjB,EAAsB;AACxD,QAAO,IAAP;AACA,CAFD;;AAIA,KAAK,aAAL,CAAmB,aAAnB,GAAmC,UAAS,MAAT,EAAiB,GAAjB,EAAsB;AACxD,QAAO,IAAP;AACA,CAFD;;AAIA,KAAK,aAAL,CAAmB,aAAnB,GAAmC,UAAS,MAAT,EAAiB,GAAjB,EAAsB;AACxD,QAAO,IAAP;AACA,CAFD,qH;;;;;;;;;;;ACVA,KAAK,IAAL,GAAY,IAAI,MAAM,UAAV,CAAqB,MAArB,CAAZ;;AAEA,KAAK,IAAL,CAAU,aAAV,GAA0B,UAAS,MAAT,EAAiB,GAAjB,EAAsB;AAC/C,QAAO,IAAP;AACA,CAFD;;AAIA,KAAK,IAAL,CAAU,aAAV,GAA0B,UAAS,MAAT,EAAiB,GAAjB,EAAsB;AAC/C,QAAO,IAAP;AACA,CAFD;;AAIA,KAAK,IAAL,CAAU,aAAV,GAA0B,UAAS,MAAT,EAAiB,GAAjB,EAAsB;AAC/C,QAAO,IAAP;AACA,CAFD,qH;;;;;;;;;;;ACVA,KAAK,IAAL,GAAY,IAAI,MAAM,UAAV,CAAqB,MAArB,CAAZ;;AAEA,KAAK,IAAL,CAAU,aAAV,GAA0B,UAAS,MAAT,EAAiB,GAAjB,EAAsB;AAC/C,QAAO,IAAP;AACA,CAFD;;AAIA,KAAK,IAAL,CAAU,aAAV,GAA0B,UAAS,MAAT,EAAiB,GAAjB,EAAsB;AAC/C,QAAO,IAAP;AACA,CAFD;;AAIA,KAAK,IAAL,CAAU,aAAV,GAA0B,UAAS,MAAT,EAAiB,GAAjB,EAAsB;AAC/C,QAAO,IAAP;AACA,CAFD,qH;;;;;;;;;;;ACVA,KAAK,SAAL,GAAiB,IAAI,MAAM,UAAV,CAAqB,WAArB,CAAjB;;AAEA,KAAK,SAAL,CAAe,aAAf,GAA+B,UAAS,MAAT,EAAiB,GAAjB,EAAsB;AACpD,QAAO,IAAP;AACA,CAFD;;AAIA,KAAK,SAAL,CAAe,aAAf,GAA+B,UAAS,MAAT,EAAiB,GAAjB,EAAsB;AACpD,QAAO,IAAP;AACA,CAFD;;AAIA,KAAK,SAAL,CAAe,aAAf,GAA+B,UAAS,MAAT,EAAiB,GAAjB,EAAsB;AACpD,QAAO,IAAP;AACA,CAFD,qH;;;;;;;;;;;ACVA,KAAK,aAAL,GAAqB,IAAI,MAAM,UAAV,CAAqB,eAArB,CAArB;;AAEA,KAAK,aAAL,CAAmB,aAAnB,GAAmC,UAAS,MAAT,EAAiB,GAAjB,EAAsB;AACxD,QAAO,IAAP;AACA,CAFD;;AAIA,KAAK,aAAL,CAAmB,aAAnB,GAAmC,UAAS,MAAT,EAAiB,GAAjB,EAAsB;AACxD,QAAO,IAAP;AACA,CAFD;;AAIA,KAAK,aAAL,CAAmB,aAAnB,GAAmC,UAAS,MAAT,EAAiB,GAAjB,EAAsB;AACxD,QAAO,IAAP;AACA,CAFD,qH;;;;;;;;;;;ACVA,KAAK,SAAL,GAAiB,IAAI,MAAM,UAAV,CAAqB,WAArB,CAAjB;;AAEA,KAAK,SAAL,CAAe,aAAf,GAA+B,UAAS,MAAT,EAAiB,GAAjB,EAAsB;AACpD,QAAO,IAAP;AACA,CAFD;;AAIA,KAAK,SAAL,CAAe,aAAf,GAA+B,UAAS,MAAT,EAAiB,GAAjB,EAAsB;AACpD,QAAO,IAAP;AACA,CAFD;;AAIA,KAAK,SAAL,CAAe,aAAf,GAA+B,UAAS,MAAT,EAAiB,GAAjB,EAAsB;AACpD,QAAO,IAAP;AACA,CAFD,qH;;;;;;;;;;;ACVA,KAAK,aAAL,GAAqB,IAAI,MAAM,UAAV,CAAqB,eAArB,CAArB;;AAEA,KAAK,aAAL,CAAmB,aAAnB,GAAmC,UAAS,MAAT,EAAiB,GAAjB,EAAsB;AACxD,QAAO,IAAP;AACA,CAFD;;AAIA,KAAK,aAAL,CAAmB,aAAnB,GAAmC,UAAS,MAAT,EAAiB,GAAjB,EAAsB;AACxD,QAAO,IAAP;AACA,CAFD;;AAIA,KAAK,aAAL,CAAmB,aAAnB,GAAmC,UAAS,MAAT,EAAiB,GAAjB,EAAsB;AACxD,QAAO,IAAP;AACA,CAFD,qH;;;;;;;;;;;ACVA,KAAK,oBAAL,GAA4B,IAAI,MAAM,UAAV,CAAqB,sBAArB,CAA5B;;AAEA,KAAK,oBAAL,CAA0B,aAA1B,GAA0C,UAAS,MAAT,EAAiB,GAAjB,EAAsB;AAC/D,QAAO,IAAP;AACA,CAFD;;AAIA,KAAK,oBAAL,CAA0B,aAA1B,GAA0C,UAAS,MAAT,EAAiB,GAAjB,EAAsB;AAC/D,QAAO,IAAP;AACA,CAFD;;AAIA,KAAK,oBAAL,CAA0B,aAA1B,GAA0C,UAAS,MAAT,EAAiB,GAAjB,EAAsB;AAC/D,QAAO,IAAP;AACA,CAFD,qH;;;;;;;;;;;ACVA,KAAK,OAAL,GAAe,IAAI,MAAM,UAAV,CAAqB,SAArB,CAAf;;AAEA,KAAK,OAAL,CAAa,aAAb,GAA6B,UAAS,MAAT,EAAiB,GAAjB,EAAsB;AAClD,QAAO,IAAP;AACA,CAFD;;AAIA,KAAK,OAAL,CAAa,aAAb,GAA6B,UAAS,MAAT,EAAiB,GAAjB,EAAsB;AAClD,QAAO,IAAP;AACA,CAFD;;AAIA,KAAK,OAAL,CAAa,aAAb,GAA6B,UAAS,MAAT,EAAiB,GAAjB,EAAsB;AAClD,QAAO,IAAP;AACA,CAFD,qH;;;;;;;;;;;ACVA,KAAK,OAAL,GAAe,IAAI,MAAM,UAAV,CAAqB,SAArB,CAAf;;AAEA,KAAK,OAAL,CAAa,aAAb,GAA6B,UAAS,MAAT,EAAiB,GAAjB,EAAsB;AAClD,QAAO,IAAP;AACA,CAFD;;AAIA,KAAK,OAAL,CAAa,aAAb,GAA6B,UAAS,MAAT,EAAiB,GAAjB,EAAsB;AAClD,QAAO,IAAP;AACA,CAFD;;AAIA,KAAK,OAAL,CAAa,aAAb,GAA6B,UAAS,MAAT,EAAiB,GAAjB,EAAsB;AAClD,QAAO,IAAP;AACA,CAFD,qH;;;;;;;;;;;;;;;;;;;;;;ACVA,SAAS,KAAT,CAAe;AACd,UAAQ,gBAAU,MAAV,EAAkB,GAAlB,EAAuB;AAC9B,WAAO,SAAS,aAAT,CAAuB,MAAvB,EAA+B,GAA/B,CAAP;AACA,GAHa;;AAKd,UAAQ,gBAAU,MAAV,EAAkB,GAAlB,EAAuB,MAAvB,EAA+B,QAA/B,EAAyC;AAChD,WAAO,SAAS,aAAT,CAAuB,MAAvB,EAA+B,GAA/B,CAAP;AACA,GAPa;;AASd,UAAQ,gBAAU,MAAV,EAAkB,GAAlB,EAAuB;AAC9B,WAAO,SAAS,aAAT,CAAuB,MAAvB,EAA+B,GAA/B,CAAP;AACA;AAXa,CAAf;;AAcA,SAAS,MAAT,CAAgB,MAAhB,CAAuB,UAAS,MAAT,EAAiB,GAAjB,EAAsB;AAC5C,MAAI,SAAJ,GAAgB,IAAI,IAAJ,EAAhB;AACA,MAAI,SAAJ,GAAgB,MAAhB;AACA,MAAI,UAAJ,GAAiB,IAAI,SAArB;AACA,MAAI,UAAJ,GAAiB,IAAI,SAArB;;AAGA,MAAG,CAAC,IAAI,SAAR,EAAmB,IAAI,SAAJ,GAAgB,MAAhB;AACnB,CARD;;AAUA,SAAS,gBAAT,CAA0B,GAA1B,EAA+B;;AAE3B,MAAI,SAAS,SAAS,OAAT,EAAb;AACA,MAAI,MAAJ,EAAY;AACR,QAAI,SAAS,EAAb;AACA,WAAO,OAAP,CAAe,MAAf,CAAsB,OAAtB,CAA8B,UAAS,CAAT,EAAY,CAAZ,EAAe;AACzC,aAAO,IAAP,CAAY,CAAZ;AACH,KAFD;AAGA,WAAO,OAAP,CAAe,MAAf,CAAsB,OAAtB,CAA8B,UAAS,CAAT,EAAY,CAAZ,EAAe;AACzC,aAAO,IAAP,CAAY,CAAZ;AACH,KAFD;;AAIA,QAAI,MAAM,IAAI,UAAd;AACA,QAAI,MAAM,IAAI,SAAd;AACA,QAAI,KAAK,IAAI,SAAb;;AAEA,QAAI,qBAAqB,KAAK,IAAL,CAAU,CAAC,KAAG,GAAJ,IAAS,CAAnB,CAAzB;AACA,QAAI,oBAAoB,CAAC,KAAG,GAAJ,IAAW,CAAnC;;;AAGA,QAAI,iBAAiB,CAArB;AACA,SAAI,IAAI,IAAI,CAAZ,EAAc,IAAI,kBAAlB,EAAqC,GAArC,EAAyC;AACrC,wBAAmB,OAAO,MAAI,CAAX,KAAkB,IAAE,CAAvC;AACH;;AAED,QAAI,OAAO,CAAX;AACA,SAAI,IAAI,IAAI,CAAZ,EAAe,IAAE,EAAjB,EAAoB,GAApB,EAAwB;;AACpB,aAAQ,QAAQ,CAAhB;AACA,cAAQ,CAAR;AACH;;AAED,SAAI,IAAI,IAAI,CAAZ,EAAe,IAAE,GAAjB,EAAqB,GAArB,EAAyB;;AACrB,aAAQ,QAAQ,CAAhB;AACH;AACD,WAAO,CAAC,iBAAiB,IAAlB,KAA2B,GAAlC;AACH,GAhCD,MAgCO;AACH,UAAM,IAAI,OAAO,KAAX,CAAiB,6BAAjB,CAAN;AACH;AACJ;;AAED,SAAS,MAAT,CAAgB,MAAhB,CAAuB,UAAS,MAAT,EAAiB,GAAjB,EAAsB,UAAtB,EAAkC,QAAlC,EAA4C,OAA5C,EAAqD;AAC3E,WAAS,IAAT,GAAgB,SAAS,IAAT,IAAiB,EAAjC;AACA,WAAS,IAAT,CAAc,UAAd,GAA2B,IAAI,IAAJ,EAA3B;AACA,WAAS,IAAT,CAAc,UAAd,GAA2B,MAA3B;AAGA,CAND;;AAQA,SAAS,MAAT,CAAgB,MAAhB,CAAuB,UAAS,MAAT,EAAiB,GAAjB,EAAsB,CAE5C,CAFD;;AAIA,SAAS,KAAT,CAAe,MAAf,CAAsB,UAAS,MAAT,EAAiB,GAAjB,EAAsB,CAE3C,CAFD;;AAIA,SAAS,KAAT,CAAe,MAAf,CAAsB,UAAS,MAAT,EAAiB,GAAjB,EAAsB,UAAtB,EAAkC,QAAlC,EAA4C,OAA5C,EAAqD;AAC1E,UAAQ,GAAR,CAAY,wBAAZ;AACA,MAAI,WAAW,QAAQ,IAAR,CAAa,EAAC,KAAK,UAAN,EAAb,CAAf;AACA,WAAS,OAAT,CAAiB,UAAS,GAAT,EAAa,CAAb,EAAe;AAC/B,QAAI,MAAM,iBAAiB,GAAjB,CAAV;AACA,YAAQ,MAAR,CAAe,IAAI,GAAnB,EAAuB,EAAC,MAAK,EAAC,OAAO,IAAI,KAAJ,IAAW,MAAI,IAAI,OAAnB,IAA4B,IAAI,OAAxC,EAAiD,KAAK,GAAtD,EAA2D,WAAW,IAAI,OAAJ,CAAY,IAAlF,EAAN,EAAvB;AACA,GAHD;AAIA,CAPD;;AASA,SAAS,KAAT,CAAe,MAAf,CAAsB,UAAS,MAAT,EAAiB,GAAjB,EAAsB,CAE3C,CAFD,uE;;;;;;;;;;;ACzFA,cAAc,KAAd,CAAoB;AACnB,SAAQ,gBAAU,MAAV,EAAkB,GAAlB,EAAuB;AAC9B,SAAO,cAAc,aAAd,CAA4B,MAA5B,EAAoC,GAApC,CAAP;AACA,EAHkB;;AAKnB,SAAQ,gBAAU,MAAV,EAAkB,GAAlB,EAAuB,MAAvB,EAA+B,QAA/B,EAAyC;AAChD,SAAO,cAAc,aAAd,CAA4B,MAA5B,EAAoC,GAApC,CAAP;AACA,EAPkB;;AASnB,SAAQ,gBAAU,MAAV,EAAkB,GAAlB,EAAuB;AAC9B,SAAO,cAAc,aAAd,CAA4B,MAA5B,EAAoC,GAApC,CAAP;AACA;AAXkB,CAApB;;AAcA,cAAc,MAAd,CAAqB,MAArB,CAA4B,UAAS,MAAT,EAAiB,GAAjB,EAAsB;AACjD,KAAI,SAAJ,GAAgB,IAAI,IAAJ,EAAhB;AACA,KAAI,SAAJ,GAAgB,MAAhB;AACA,KAAI,UAAJ,GAAiB,IAAI,SAArB;AACA,KAAI,UAAJ,GAAiB,IAAI,SAArB;;AAGA,KAAG,CAAC,IAAI,SAAR,EAAmB,IAAI,SAAJ,GAAgB,MAAhB;AACnB,CARD;;AAUA,cAAc,MAAd,CAAqB,MAArB,CAA4B,UAAS,MAAT,EAAiB,GAAjB,EAAsB,UAAtB,EAAkC,QAAlC,EAA4C,OAA5C,EAAqD;AAChF,UAAS,IAAT,GAAgB,SAAS,IAAT,IAAiB,EAAjC;AACA,UAAS,IAAT,CAAc,UAAd,GAA2B,IAAI,IAAJ,EAA3B;AACA,UAAS,IAAT,CAAc,UAAd,GAA2B,MAA3B;AAGA,CAND;;AAQA,cAAc,MAAd,CAAqB,MAArB,CAA4B,UAAS,MAAT,EAAiB,GAAjB,EAAsB,CAEjD,CAFD;;AAIA,cAAc,KAAd,CAAoB,MAApB,CAA2B,UAAS,MAAT,EAAiB,GAAjB,EAAsB;AAChD,KAAI,UAAU,IAAI,OAAlB;AACA,KAAI,YAAY,EAAhB;AACA,MAAI,IAAI,GAAR,IAAe,QAAQ,MAAvB,EAA8B;AAC7B,MAAI,QAAQ,QAAQ,MAAR,CAAe,GAAf,CAAZ;AACA,MAAI,WAAW,MAAM,IAArB;AACA,OAAI,IAAI,IAAR,IAAgB,MAAM,MAAtB,EAA6B;AAC5B,OAAI,UAAU,MAAM,MAAN,CAAa,IAAb,CAAd;AACA,OAAI,UAAU,EAAd;AACA,WAAQ,QAAR,IAAoB,WAAS,GAAT,GAAa,QAAQ,IAArB,GAA0B,GAA1B,GAA8B,QAAQ,UAAtC,GAAiD,GAAjD,GAAqD,QAAQ,SAA7D,GAAuE,GAAvE,GAA2E,QAAQ,SAAvG;AACA,WAAQ,OAAR,IAAmB,IAAnB;AACA,WAAQ,WAAR,IAAuB,IAAvB;AACA,WAAQ,YAAR,IAAwB,QAAQ,UAAhC;AACA,WAAQ,WAAR,IAAuB,QAAQ,SAA/B;AACA,WAAQ,WAAR,IAAuB,QAAQ,SAA/B;AACA,aAAU,IAAV,CAAe,OAAf;AACA;AACD;;AAED,SAAQ,GAAR,CAAY,SAAZ;;AAEA,WAAU,OAAV,CAAkB,UAAS,MAAT,EAAgB,CAAhB,EAAkB;AACnC,MAAI,eAAe,QAAQ,OAAR,CAAgB,EAAC,UAAS,OAAO,MAAjB,EAAhB,CAAnB;AACA,MAAG,iBAAiB,SAApB,EAA8B;AAC7B,OAAI,UAAU,aAAa,OAA3B;AACA,OAAI,UAAU,aAAa,OAA3B;AACA,OAAI,QAAQ,aAAa,KAAzB;AACA,WAAQ,MAAR,CAAe,EAAC,UAAS,OAAO,MAAjB,EAAf,EAAwC,EAAC,MAAK,EAAC,OAAO,SAAO,OAAO,KAAP,GAAa,OAApB,IAA6B,OAArC,EAA8C,KAAK,OAAO,KAA1D,EAAiE,WAAW,OAAO,SAAnF,EAAN,EAAxC;AACA,GALD,MAMI;AACH,WAAQ,MAAR,CAAe,EAAC,UAAS,OAAO,MAAjB,EAAf,EAAwC,EAAC,MAAK,EAAC,MAAM,IAAP,EAAY,KAAK,UAAjB,EAA4B,OAAO,OAAO,KAA1C,EAAiD,KAAK,OAAO,KAA7D,EAAoE,WAAW,OAAO,SAAtF,EAAiG,MAAM,IAAvG,EAA6G,SAAS,GAAtH,EAA2H,SAAS,GAApI,EAAyI,OAAO,GAAhJ,EAAqJ,QAAQ,KAA7J,EAAoK,YAAY,OAAO,UAAvL,EAAmM,WAAW,OAAO,SAArN,EAAgO,WAAW,OAAO,SAAlP,EAAN,EAAxC;AACA;AACD,EAXD;AAYA,CAjCD;;AAmCA,cAAc,KAAd,CAAoB,MAApB,CAA2B,UAAS,MAAT,EAAiB,GAAjB,EAAsB,UAAtB,EAAkC,QAAlC,EAA4C,OAA5C,EAAqD;AAC/E,SAAQ,GAAR,CAAY,6BAAZ;AACA,KAAI,UAAU,IAAI,OAAlB;AACA,KAAI,YAAY,EAAhB;AACA,MAAI,IAAI,GAAR,IAAe,QAAQ,MAAvB,EAA8B;AAC7B,MAAI,QAAQ,QAAQ,MAAR,CAAe,GAAf,CAAZ;AACA,MAAI,WAAW,MAAM,IAArB;AACA,OAAI,IAAI,IAAR,IAAgB,MAAM,MAAtB,EAA6B;AAC5B,OAAI,UAAU,MAAM,MAAN,CAAa,IAAb,CAAd;AACA,OAAI,UAAU,EAAd;AACA,WAAQ,GAAR,CAAY,OAAZ;AACA,WAAQ,QAAR,IAAoB,WAAS,GAAT,GAAa,QAAQ,IAArB,GAA0B,GAA1B,GAA8B,QAAQ,UAAtC,GAAiD,GAAjD,GAAqD,QAAQ,SAA7D,GAAuE,GAAvE,GAA2E,QAAQ,SAAvG;AACA,WAAQ,OAAR,IAAmB,IAAnB;AACA,WAAQ,WAAR,IAAuB,IAAvB;AACA,WAAQ,YAAR,IAAwB,QAAQ,UAAhC;AACA,WAAQ,WAAR,IAAuB,QAAQ,SAA/B;AACA,WAAQ,WAAR,IAAuB,QAAQ,SAA/B;AACA,aAAU,IAAV,CAAe,OAAf;AACA;AACD;;AAED,SAAQ,GAAR,CAAY,SAAZ;;AAEA,WAAU,OAAV,CAAkB,UAAS,MAAT,EAAgB,CAAhB,EAAkB;AACnC,MAAI,eAAe,QAAQ,OAAR,CAAgB,EAAC,UAAS,OAAO,MAAjB,EAAhB,CAAnB;AACA,MAAG,iBAAiB,SAApB,EAA8B;AAC7B,OAAI,UAAU,aAAa,OAA3B;AACA,OAAI,UAAU,aAAa,OAA3B;AACA,OAAI,QAAQ,aAAa,KAAzB;AACA,WAAQ,MAAR,CAAe,EAAC,UAAS,OAAO,MAAjB,EAAf,EAAwC,EAAC,MAAK,EAAC,OAAO,SAAO,OAAO,KAAP,GAAa,OAApB,IAA6B,OAArC,EAA8C,KAAK,OAAO,KAA1D,EAAiE,WAAW,OAAO,SAAnF,EAAN,EAAxC;AACA,GALD,MAMI;AACH,WAAQ,MAAR,CAAe,EAAC,UAAS,OAAO,MAAjB,EAAf,EAAwC,EAAC,MAAK,EAAC,MAAM,IAAP,EAAY,KAAK,UAAjB,EAA4B,OAAO,OAAO,KAA1C,EAAiD,KAAK,OAAO,KAA7D,EAAoE,WAAW,OAAO,SAAtF,EAAiG,MAAM,EAAvG,EAA2G,SAAS,GAApH,EAAyH,SAAS,GAAlI,EAAuI,OAAO,GAA9I,EAAmJ,QAAQ,KAA3J,EAAkK,YAAY,OAAO,UAArL,EAAiM,WAAW,OAAO,SAAnN,EAA8N,WAAW,OAAO,SAAhP,EAAN,EAAxC;AACA;AACD,EAXD;AAYA,CAnCD;;AAqCA,cAAc,KAAd,CAAoB,MAApB,CAA2B,UAAS,MAAT,EAAiB,GAAjB,EAAsB,CAEhD,CAFD,mE;;;;;;;;;;;AC5GA,KAAK,KAAL,CAAW;AACV,SAAQ,gBAAU,MAAV,EAAkB,GAAlB,EAAuB;AAC9B,SAAO,KAAK,aAAL,CAAmB,MAAnB,EAA2B,GAA3B,CAAP;AACA,EAHS;;AAKV,SAAQ,gBAAU,MAAV,EAAkB,GAAlB,EAAuB,MAAvB,EAA+B,QAA/B,EAAyC;AAChD,SAAO,KAAK,aAAL,CAAmB,MAAnB,EAA2B,GAA3B,CAAP;AACA,EAPS;;AASV,SAAQ,gBAAU,MAAV,EAAkB,GAAlB,EAAuB;AAC9B,SAAO,KAAK,aAAL,CAAmB,MAAnB,EAA2B,GAA3B,CAAP;AACA;AAXS,CAAX;;AAcA,KAAK,MAAL,CAAY,MAAZ,CAAmB,UAAS,MAAT,EAAiB,GAAjB,EAAsB;AACxC,KAAI,SAAJ,GAAgB,IAAI,IAAJ,EAAhB;AACA,KAAI,SAAJ,GAAgB,MAAhB;AACA,KAAI,UAAJ,GAAiB,IAAI,SAArB;AACA,KAAI,UAAJ,GAAiB,IAAI,SAArB;;AAGA,KAAG,CAAC,IAAI,SAAR,EAAmB,IAAI,SAAJ,GAAgB,MAAhB;AACnB,CARD;;AAUA,KAAK,MAAL,CAAY,MAAZ,CAAmB,UAAS,MAAT,EAAiB,GAAjB,EAAsB,UAAtB,EAAkC,QAAlC,EAA4C,OAA5C,EAAqD;AACvE,UAAS,IAAT,GAAgB,SAAS,IAAT,IAAiB,EAAjC;AACA,UAAS,IAAT,CAAc,UAAd,GAA2B,IAAI,IAAJ,EAA3B;AACA,UAAS,IAAT,CAAc,UAAd,GAA2B,MAA3B;AAGA,CAND;;AAQA,KAAK,MAAL,CAAY,MAAZ,CAAmB,UAAS,MAAT,EAAiB,GAAjB,EAAsB,CAExC,CAFD;;AAIA,KAAK,KAAL,CAAW,MAAX,CAAkB,UAAS,MAAT,EAAiB,GAAjB,EAAsB,CAEvC,CAFD;;AAIA,KAAK,KAAL,CAAW,MAAX,CAAkB,UAAS,MAAT,EAAiB,GAAjB,EAAsB,UAAtB,EAAkC,QAAlC,EAA4C,OAA5C,EAAqD,CAEtE,CAFD;;AAIA,KAAK,KAAL,CAAW,MAAX,CAAkB,UAAS,MAAT,EAAiB,GAAjB,EAAsB,CAEvC,CAFD,2E;;;;;;;;;;;AC5CA,KAAK,KAAL,CAAW;AACV,SAAQ,gBAAU,MAAV,EAAkB,GAAlB,EAAuB;AAC9B,SAAO,KAAK,aAAL,CAAmB,MAAnB,EAA2B,GAA3B,CAAP;AACA,EAHS;;AAKV,SAAQ,gBAAU,MAAV,EAAkB,GAAlB,EAAuB,MAAvB,EAA+B,QAA/B,EAAyC;AAChD,SAAO,KAAK,aAAL,CAAmB,MAAnB,EAA2B,GAA3B,CAAP;AACA,EAPS;;AASV,SAAQ,gBAAU,MAAV,EAAkB,GAAlB,EAAuB;AAC9B,SAAO,KAAK,aAAL,CAAmB,MAAnB,EAA2B,GAA3B,CAAP;AACA;AAXS,CAAX;;AAcA,KAAK,MAAL,CAAY,MAAZ,CAAmB,UAAS,MAAT,EAAiB,GAAjB,EAAsB;AACxC,KAAI,SAAJ,GAAgB,IAAI,IAAJ,EAAhB;AACA,KAAI,SAAJ,GAAgB,MAAhB;AACA,KAAI,UAAJ,GAAiB,IAAI,SAArB;AACA,KAAI,UAAJ,GAAiB,IAAI,SAArB;;AAGA,KAAG,CAAC,IAAI,SAAR,EAAmB,IAAI,SAAJ,GAAgB,MAAhB;AACnB,CARD;;AAUA,KAAK,MAAL,CAAY,MAAZ,CAAmB,UAAS,MAAT,EAAiB,GAAjB,EAAsB,UAAtB,EAAkC,QAAlC,EAA4C,OAA5C,EAAqD;AACvE,UAAS,IAAT,GAAgB,SAAS,IAAT,IAAiB,EAAjC;AACA,UAAS,IAAT,CAAc,UAAd,GAA2B,IAAI,IAAJ,EAA3B;AACA,UAAS,IAAT,CAAc,UAAd,GAA2B,MAA3B;AAGA,CAND;;AAQA,KAAK,MAAL,CAAY,MAAZ,CAAmB,UAAS,MAAT,EAAiB,GAAjB,EAAsB,CAExC,CAFD;;AAIA,KAAK,KAAL,CAAW,MAAX,CAAkB,UAAS,MAAT,EAAiB,GAAjB,EAAsB,CAEvC,CAFD;;AAIA,KAAK,KAAL,CAAW,MAAX,CAAkB,UAAS,MAAT,EAAiB,GAAjB,EAAsB,UAAtB,EAAkC,QAAlC,EAA4C,OAA5C,EAAqD;AACtE,SAAQ,GAAR,CAAY,oBAAZ;AACA,KAAI,UAAU,IAAI,OAAlB;AACG,KAAI,YAAY,EAAhB;AACA,MAAK,IAAI,GAAT,IAAgB,OAAhB,EAAyB;AACrB,MAAI,QAAQ,cAAR,CAAuB,GAAvB,CAAJ,EAAiC;AAC7B,OAAI,WAAW,GAAf;AACT,QAAI,IAAI,QAAR,IAAoB,QAAQ,GAAR,CAApB,EAAiC;AAChC,QAAI,UAAU,EAAd;AACA,YAAQ,QAAR,IAAoB,QAApB;AACA,YAAQ,OAAR,IAAmB,QAAQ,GAAR,EAAa,KAAhC;AACA,YAAQ,WAAR,IAAuB,IAAI,IAAJ,CAAS,QAAQ,GAAR,EAAa,IAAtB,CAAvB;AACA,YAAQ,MAAR,IAAkB,QAAQ,GAAR,EAAa,IAA/B;AACA,cAAU,IAAV,CAAe,OAAf;AACA;AACK;AACJ;;AAED,WAAU,OAAV,CAAkB,UAAS,MAAT,EAAgB,CAAhB,EAAkB;AACtC,MAAI,eAAe,QAAQ,OAAR,CAAgB,EAAC,UAAS,OAAO,MAAjB,EAAhB,CAAnB;AACA,MAAG,iBAAiB,SAApB,EAA8B;AAC7B,OAAI,UAAU,aAAa,OAA3B;AACA,OAAI,UAAU,aAAa,OAA3B;AACA,OAAI,QAAQ,aAAa,KAAzB;AACA,WAAQ,MAAR,CAAe,EAAC,UAAS,OAAO,MAAjB,EAAf,EAAwC,EAAC,MAAK,EAAC,OAAO,SAAO,OAAO,KAAP,GAAa,OAApB,IAA6B,OAArC,EAA8C,KAAK,OAAO,KAA1D,EAAiE,WAAW,OAAO,SAAnF,EAAN,EAAxC;AACA,GALD,MAMI;AACH,WAAQ,MAAR,CAAe,EAAC,UAAS,OAAO,MAAjB,EAAf,EAAwC,EAAC,MAAK,EAAC,MAAM,IAAP,EAAa,KAAK,MAAlB,EAA0B,OAAO,OAAO,KAAxC,EAA+C,KAAK,OAAO,KAA3D,EAAkE,WAAW,OAAO,SAApF,EAA+F,MAAM,OAAO,IAA5G,EAAkH,SAAS,GAA3H,EAAgI,SAAS,GAAzI,EAA8I,OAAO,GAArJ,EAA0J,QAAQ,KAAlK,EAAN,EAAxC;AACA;AACD,EAXE;AAYH,CA9BD;;AAgCA,KAAK,KAAL,CAAW,MAAX,CAAkB,UAAS,MAAT,EAAiB,GAAjB,EAAsB,CAEvC,CAFD,2E;;;;;;;;;;;ACxEA,UAAU,KAAV,CAAgB;AACf,SAAQ,gBAAU,MAAV,EAAkB,GAAlB,EAAuB;AAC9B,SAAO,UAAU,aAAV,CAAwB,MAAxB,EAAgC,GAAhC,CAAP;AACA,EAHc;;AAKf,SAAQ,gBAAU,MAAV,EAAkB,GAAlB,EAAuB,MAAvB,EAA+B,QAA/B,EAAyC;AAChD,SAAO,UAAU,aAAV,CAAwB,MAAxB,EAAgC,GAAhC,CAAP;AACA,EAPc;;AASf,SAAQ,gBAAU,MAAV,EAAkB,GAAlB,EAAuB;AAC9B,SAAO,UAAU,aAAV,CAAwB,MAAxB,EAAgC,GAAhC,CAAP;AACA;AAXc,CAAhB;;AAcA,UAAU,MAAV,CAAiB,MAAjB,CAAwB,UAAS,MAAT,EAAiB,GAAjB,EAAsB;AAC7C,KAAI,SAAJ,GAAgB,IAAI,IAAJ,EAAhB;AACA,KAAI,SAAJ,GAAgB,MAAhB;AACA,KAAI,UAAJ,GAAiB,IAAI,SAArB;AACA,KAAI,UAAJ,GAAiB,IAAI,SAArB;;AAGA,KAAG,CAAC,IAAI,SAAR,EAAmB,IAAI,SAAJ,GAAgB,MAAhB;AACnB,CARD;;AAUA,UAAU,MAAV,CAAiB,MAAjB,CAAwB,UAAS,MAAT,EAAiB,GAAjB,EAAsB,UAAtB,EAAkC,QAAlC,EAA4C,OAA5C,EAAqD;AAC5E,UAAS,IAAT,GAAgB,SAAS,IAAT,IAAiB,EAAjC;AACA,UAAS,IAAT,CAAc,UAAd,GAA2B,IAAI,IAAJ,EAA3B;AACA,UAAS,IAAT,CAAc,UAAd,GAA2B,MAA3B;AAGA,CAND;;AAQA,UAAU,MAAV,CAAiB,MAAjB,CAAwB,UAAS,MAAT,EAAiB,GAAjB,EAAsB,CAE7C,CAFD;;AAIA,UAAU,KAAV,CAAgB,MAAhB,CAAuB,UAAS,MAAT,EAAiB,GAAjB,EAAsB,CAE5C,CAFD;;AAIA,UAAU,KAAV,CAAgB,MAAhB,CAAuB,UAAS,MAAT,EAAiB,GAAjB,EAAsB,UAAtB,EAAkC,QAAlC,EAA4C,OAA5C,EAAqD,CAE3E,CAFD;;AAIA,UAAU,KAAV,CAAgB,MAAhB,CAAuB,UAAS,MAAT,EAAiB,GAAjB,EAAsB,CAE5C,CAFD,sE;;;;;;;;;;;AC5CA,cAAc,KAAd,CAAoB;AACnB,SAAQ,gBAAU,MAAV,EAAkB,GAAlB,EAAuB;AAC9B,SAAO,cAAc,aAAd,CAA4B,MAA5B,EAAoC,GAApC,CAAP;AACA,EAHkB;;AAKnB,SAAQ,gBAAU,MAAV,EAAkB,GAAlB,EAAuB,MAAvB,EAA+B,QAA/B,EAAyC;AAChD,SAAO,cAAc,aAAd,CAA4B,MAA5B,EAAoC,GAApC,CAAP;AACA,EAPkB;;AASnB,SAAQ,gBAAU,MAAV,EAAkB,GAAlB,EAAuB;AAC9B,SAAO,cAAc,aAAd,CAA4B,MAA5B,EAAoC,GAApC,CAAP;AACA;AAXkB,CAApB;;AAcA,cAAc,MAAd,CAAqB,MAArB,CAA4B,UAAS,MAAT,EAAiB,GAAjB,EAAsB;AACjD,KAAI,SAAJ,GAAgB,IAAI,IAAJ,EAAhB;AACA,KAAI,SAAJ,GAAgB,MAAhB;AACA,KAAI,UAAJ,GAAiB,IAAI,SAArB;AACA,KAAI,UAAJ,GAAiB,IAAI,SAArB;;AAGA,KAAG,CAAC,IAAI,SAAR,EAAmB,IAAI,SAAJ,GAAgB,MAAhB;AACnB,CARD;;AAUA,cAAc,MAAd,CAAqB,MAArB,CAA4B,UAAS,MAAT,EAAiB,GAAjB,EAAsB,UAAtB,EAAkC,QAAlC,EAA4C,OAA5C,EAAqD;AAChF,UAAS,IAAT,GAAgB,SAAS,IAAT,IAAiB,EAAjC;AACA,UAAS,IAAT,CAAc,UAAd,GAA2B,IAAI,IAAJ,EAA3B;AACA,UAAS,IAAT,CAAc,UAAd,GAA2B,MAA3B;AAGA,CAND;;AAQA,cAAc,MAAd,CAAqB,MAArB,CAA4B,UAAS,MAAT,EAAiB,GAAjB,EAAsB,CAEjD,CAFD;;AAIA,cAAc,KAAd,CAAoB,MAApB,CAA2B,UAAS,MAAT,EAAiB,GAAjB,EAAsB,CAEhD,CAFD;;AAIA,cAAc,KAAd,CAAoB,MAApB,CAA2B,UAAS,MAAT,EAAiB,GAAjB,EAAsB,UAAtB,EAAkC,QAAlC,EAA4C,OAA5C,EAAqD,CAE/E,CAFD;;AAIA,cAAc,KAAd,CAAoB,MAApB,CAA2B,UAAS,MAAT,EAAiB,GAAjB,EAAsB,CAEhD,CAFD,kE;;;;;;;;;;;AC5CA,UAAU,KAAV,CAAgB;AACf,SAAQ,gBAAU,MAAV,EAAkB,GAAlB,EAAuB;AAC9B,SAAO,UAAU,aAAV,CAAwB,MAAxB,EAAgC,GAAhC,CAAP;AACA,EAHc;;AAKf,SAAQ,gBAAU,MAAV,EAAkB,GAAlB,EAAuB,MAAvB,EAA+B,QAA/B,EAAyC;AAChD,SAAO,UAAU,aAAV,CAAwB,MAAxB,EAAgC,GAAhC,CAAP;AACA,EAPc;;AASf,SAAQ,gBAAU,MAAV,EAAkB,GAAlB,EAAuB;AAC9B,SAAO,UAAU,aAAV,CAAwB,MAAxB,EAAgC,GAAhC,CAAP;AACA;AAXc,CAAhB;;AAcA,UAAU,MAAV,CAAiB,MAAjB,CAAwB,UAAS,MAAT,EAAiB,GAAjB,EAAsB;AAC7C,KAAI,SAAJ,GAAgB,IAAI,IAAJ,EAAhB;AACA,KAAI,SAAJ,GAAgB,MAAhB;AACA,KAAI,UAAJ,GAAiB,IAAI,SAArB;AACA,KAAI,UAAJ,GAAiB,IAAI,SAArB;;AAGA,KAAG,CAAC,IAAI,SAAR,EAAmB,IAAI,SAAJ,GAAgB,MAAhB;AACnB,CARD;;AAUA,UAAU,MAAV,CAAiB,MAAjB,CAAwB,UAAS,MAAT,EAAiB,GAAjB,EAAsB,UAAtB,EAAkC,QAAlC,EAA4C,OAA5C,EAAqD;AAC5E,UAAS,IAAT,GAAgB,SAAS,IAAT,IAAiB,EAAjC;AACA,UAAS,IAAT,CAAc,UAAd,GAA2B,IAAI,IAAJ,EAA3B;AACA,UAAS,IAAT,CAAc,UAAd,GAA2B,MAA3B;AAGA,CAND;;AAQA,UAAU,MAAV,CAAiB,MAAjB,CAAwB,UAAS,MAAT,EAAiB,GAAjB,EAAsB,CAE7C,CAFD;;AAIA,UAAU,KAAV,CAAgB,MAAhB,CAAuB,UAAS,MAAT,EAAiB,GAAjB,EAAsB,CAE5C,CAFD;;AAIA,UAAU,KAAV,CAAgB,MAAhB,CAAuB,UAAS,MAAT,EAAiB,GAAjB,EAAsB,UAAtB,EAAkC,QAAlC,EAA4C,OAA5C,EAAqD,CAE3E,CAFD;;AAIA,UAAU,KAAV,CAAgB,MAAhB,CAAuB,UAAS,MAAT,EAAiB,GAAjB,EAAsB,CAE5C,CAFD,sE;;;;;;;;;;;AC5CA,cAAc,KAAd,CAAoB;AACnB,SAAQ,gBAAU,MAAV,EAAkB,GAAlB,EAAuB;AAC9B,SAAO,cAAc,aAAd,CAA4B,MAA5B,EAAoC,GAApC,CAAP;AACA,EAHkB;;AAKnB,SAAQ,gBAAU,MAAV,EAAkB,GAAlB,EAAuB,MAAvB,EAA+B,QAA/B,EAAyC;AAChD,SAAO,cAAc,aAAd,CAA4B,MAA5B,EAAoC,GAApC,CAAP;AACA,EAPkB;;AASnB,SAAQ,gBAAU,MAAV,EAAkB,GAAlB,EAAuB;AAC9B,SAAO,cAAc,aAAd,CAA4B,MAA5B,EAAoC,GAApC,CAAP;AACA;AAXkB,CAApB;;AAcA,cAAc,MAAd,CAAqB,MAArB,CAA4B,UAAS,MAAT,EAAiB,GAAjB,EAAsB;AACjD,KAAI,SAAJ,GAAgB,IAAI,IAAJ,EAAhB;AACA,KAAI,SAAJ,GAAgB,MAAhB;AACA,KAAI,UAAJ,GAAiB,IAAI,SAArB;AACA,KAAI,UAAJ,GAAiB,IAAI,SAArB;;AAGA,KAAG,CAAC,IAAI,SAAR,EAAmB,IAAI,SAAJ,GAAgB,MAAhB;AACnB,CARD;;AAUA,cAAc,MAAd,CAAqB,MAArB,CAA4B,UAAS,MAAT,EAAiB,GAAjB,EAAsB,UAAtB,EAAkC,QAAlC,EAA4C,OAA5C,EAAqD;AAChF,UAAS,IAAT,GAAgB,SAAS,IAAT,IAAiB,EAAjC;AACA,UAAS,IAAT,CAAc,UAAd,GAA2B,IAAI,IAAJ,EAA3B;AACA,UAAS,IAAT,CAAc,UAAd,GAA2B,MAA3B;AAGA,CAND;;AAQA,cAAc,MAAd,CAAqB,MAArB,CAA4B,UAAS,MAAT,EAAiB,GAAjB,EAAsB,CAEjD,CAFD;;AAIA,cAAc,KAAd,CAAoB,MAApB,CAA2B,UAAS,MAAT,EAAiB,GAAjB,EAAsB,CAEhD,CAFD;;AAIA,cAAc,KAAd,CAAoB,MAApB,CAA2B,UAAS,MAAT,EAAiB,GAAjB,EAAsB,UAAtB,EAAkC,QAAlC,EAA4C,OAA5C,EAAqD,CAE/E,CAFD;;AAIA,cAAc,KAAd,CAAoB,MAApB,CAA2B,UAAS,MAAT,EAAiB,GAAjB,EAAsB,CAEhD,CAFD,kE;;;;;;;;;;;AC5CA,qBAAqB,KAArB,CAA2B;AAC1B,SAAQ,gBAAU,MAAV,EAAkB,GAAlB,EAAuB;AAC9B,SAAO,qBAAqB,aAArB,CAAmC,MAAnC,EAA2C,GAA3C,CAAP;AACA,EAHyB;;AAK1B,SAAQ,gBAAU,MAAV,EAAkB,GAAlB,EAAuB,MAAvB,EAA+B,QAA/B,EAAyC;AAChD,SAAO,qBAAqB,aAArB,CAAmC,MAAnC,EAA2C,GAA3C,CAAP;AACA,EAPyB;;AAS1B,SAAQ,gBAAU,MAAV,EAAkB,GAAlB,EAAuB;AAC9B,SAAO,qBAAqB,aAArB,CAAmC,MAAnC,EAA2C,GAA3C,CAAP;AACA;AAXyB,CAA3B;;AAcA,qBAAqB,MAArB,CAA4B,MAA5B,CAAmC,UAAS,MAAT,EAAiB,GAAjB,EAAsB;AACxD,KAAI,SAAJ,GAAgB,IAAI,IAAJ,EAAhB;AACA,KAAI,SAAJ,GAAgB,MAAhB;AACA,KAAI,UAAJ,GAAiB,IAAI,SAArB;AACA,KAAI,UAAJ,GAAiB,IAAI,SAArB;;AAGA,KAAG,CAAC,IAAI,SAAR,EAAmB,IAAI,SAAJ,GAAgB,MAAhB;AACnB,CARD;;AAUA,qBAAqB,MAArB,CAA4B,MAA5B,CAAmC,UAAS,MAAT,EAAiB,GAAjB,EAAsB,UAAtB,EAAkC,QAAlC,EAA4C,OAA5C,EAAqD;AACvF,UAAS,IAAT,GAAgB,SAAS,IAAT,IAAiB,EAAjC;AACA,UAAS,IAAT,CAAc,UAAd,GAA2B,IAAI,IAAJ,EAA3B;AACA,UAAS,IAAT,CAAc,UAAd,GAA2B,MAA3B;AAGA,CAND;;AAQA,qBAAqB,MAArB,CAA4B,MAA5B,CAAmC,UAAS,MAAT,EAAiB,GAAjB,EAAsB,CAExD,CAFD;;AAIA,qBAAqB,KAArB,CAA2B,MAA3B,CAAkC,UAAS,MAAT,EAAiB,GAAjB,EAAsB,CAEvD,CAFD;;AAIA,qBAAqB,KAArB,CAA2B,MAA3B,CAAkC,UAAS,MAAT,EAAiB,GAAjB,EAAsB,UAAtB,EAAkC,QAAlC,EAA4C,OAA5C,EAAqD,CAEtF,CAFD;;AAIA,qBAAqB,KAArB,CAA2B,MAA3B,CAAkC,UAAS,MAAT,EAAiB,GAAjB,EAAsB,CAEvD,CAFD,2D;;;;;;;;;;;AC5CA,QAAQ,KAAR,CAAc;AACb,SAAQ,gBAAU,MAAV,EAAkB,GAAlB,EAAuB;AAC9B,SAAO,QAAQ,aAAR,CAAsB,MAAtB,EAA8B,GAA9B,CAAP;AACA,EAHY;;AAKb,SAAQ,gBAAU,MAAV,EAAkB,GAAlB,EAAuB,MAAvB,EAA+B,QAA/B,EAAyC;AAChD,SAAO,QAAQ,aAAR,CAAsB,MAAtB,EAA8B,GAA9B,CAAP;AACA,EAPY;;AASb,SAAQ,gBAAU,MAAV,EAAkB,GAAlB,EAAuB;AAC9B,SAAO,QAAQ,aAAR,CAAsB,MAAtB,EAA8B,GAA9B,CAAP;AACA;AAXY,CAAd;;AAcA,QAAQ,MAAR,CAAe,MAAf,CAAsB,UAAS,MAAT,EAAiB,GAAjB,EAAsB;AAC3C,KAAI,SAAJ,GAAgB,IAAI,IAAJ,EAAhB;AACA,KAAI,SAAJ,GAAgB,MAAhB;AACA,KAAI,UAAJ,GAAiB,IAAI,SAArB;AACA,KAAI,UAAJ,GAAiB,IAAI,SAArB;;AAGA,KAAG,CAAC,IAAI,SAAR,EAAmB,IAAI,SAAJ,GAAgB,MAAhB;AACnB,CARD;;AAUA,QAAQ,MAAR,CAAe,MAAf,CAAsB,UAAS,MAAT,EAAiB,GAAjB,EAAsB,UAAtB,EAAkC,QAAlC,EAA4C,OAA5C,EAAqD;AAC1E,UAAS,IAAT,GAAgB,SAAS,IAAT,IAAiB,EAAjC;AACA,UAAS,IAAT,CAAc,UAAd,GAA2B,IAAI,IAAJ,EAA3B;AACA,UAAS,IAAT,CAAc,UAAd,GAA2B,MAA3B;AAGA,CAND;;AAQA,QAAQ,MAAR,CAAe,MAAf,CAAsB,UAAS,MAAT,EAAiB,GAAjB,EAAsB,CAE3C,CAFD;;AAIA,QAAQ,KAAR,CAAc,MAAd,CAAqB,UAAS,MAAT,EAAiB,GAAjB,EAAsB,CAE1C,CAFD;;AAIA,QAAQ,KAAR,CAAc,MAAd,CAAqB,UAAS,MAAT,EAAiB,GAAjB,EAAsB,UAAtB,EAAkC,QAAlC,EAA4C,OAA5C,EAAqD;AACzE,SAAQ,GAAR,CAAY,uBAAZ;AACA,KAAI,UAAU,IAAI,OAAlB;AACA,KAAI,YAAY,EAAhB;AACA,KAAI,YAAY,IAAI,IAAJ,CAAS,QAAQ,MAAR,CAAT,CAAhB;AACA,MAAI,IAAI,GAAR,IAAe,OAAf,EAAuB;AACtB,MAAG,QAAQ,MAAX,EAAkB;AACf,OAAI,WAAW,GAAf;AACA,QAAI,IAAI,QAAR,IAAoB,QAAQ,GAAR,CAApB,EAAiC;AAC/B,QAAI,UAAU,EAAd;AACA,YAAQ,QAAR,IAAoB,WAAS,GAAT,GAAa,QAAjC;AACA,YAAQ,OAAR,IAAmB,QAAQ,GAAR,EAAa,QAAb,CAAnB;AACA,YAAQ,WAAR,IAAuB,SAAvB;AACA,cAAU,IAAV,CAAe,OAAf;AACD;AACH;AACD;;AAED,WAAU,OAAV,CAAkB,UAAS,MAAT,EAAgB,CAAhB,EAAkB;AACnC,MAAI,OAAO,EAAX;AACA,MAAG,OAAO,MAAP,CAAc,OAAd,CAAsB,OAAtB,IAAiC,CAAC,CAArC,EAAuC;AACtC,UAAO,IAAP;AACA,GAFD,MAGK,IAAG,OAAO,MAAP,CAAc,OAAd,CAAsB,SAAtB,IAAmC,CAAC,CAAvC,EAAyC;AAC7C,UAAO,GAAP;AACA,GAFI,MAGA,IAAG,OAAO,MAAP,CAAc,OAAd,CAAsB,KAAtB,IAA+B,CAAC,CAAnC,EAAqC;AACzC,UAAO,KAAP;AACA;AACD,MAAI,eAAe,QAAQ,OAAR,CAAgB,EAAC,UAAS,OAAO,MAAjB,EAAhB,CAAnB;AACA,MAAG,iBAAiB,SAApB,EAA8B;AAC7B,OAAI,UAAU,aAAa,OAA3B;AACA,OAAI,UAAU,aAAa,OAA3B;AACA,OAAI,QAAQ,aAAa,KAAzB;AACA,WAAQ,MAAR,CAAe,EAAC,UAAS,OAAO,MAAjB,EAAf,EAAwC,EAAC,MAAK,EAAC,OAAO,SAAO,OAAO,KAAP,GAAa,OAApB,IAA6B,OAArC,EAA8C,KAAK,OAAO,KAA1D,EAAiE,WAAW,OAAO,SAAnF,EAAN,EAAxC;AACA,GALD,MAMI;AACH,WAAQ,MAAR,CAAe,EAAC,UAAS,OAAO,MAAjB,EAAf,EAAwC,EAAC,MAAK,EAAC,MAAM,IAAP,EAAY,KAAK,SAAjB,EAA2B,OAAO,OAAO,KAAzC,EAAgD,KAAK,OAAO,KAA5D,EAAmE,WAAW,OAAO,SAArF,EAAgG,MAAM,IAAtG,EAA4G,SAAS,GAArH,EAA0H,SAAS,GAAnI,EAAwI,OAAO,GAA/I,EAAoJ,QAAQ,KAA5J,EAAN,EAAxC;AACA;AACD,EArBD;AAsBA,CAxCD;;AA0CA,QAAQ,KAAR,CAAc,MAAd,CAAqB,UAAS,MAAT,EAAiB,GAAjB,EAAsB,CAE1C,CAFD,wE;;;;;;;;;;;AClFA,QAAQ,KAAR,CAAc;AACb,SAAQ,gBAAU,MAAV,EAAkB,GAAlB,EAAuB;AAC9B,SAAO,QAAQ,aAAR,CAAsB,MAAtB,EAA8B,GAA9B,CAAP;AACA,EAHY;;AAKb,SAAQ,gBAAU,MAAV,EAAkB,GAAlB,EAAuB,MAAvB,EAA+B,QAA/B,EAAyC;AAChD,SAAO,QAAQ,aAAR,CAAsB,MAAtB,EAA8B,GAA9B,CAAP;AACA,EAPY;;AASb,SAAQ,gBAAU,MAAV,EAAkB,GAAlB,EAAuB;AAC9B,SAAO,QAAQ,aAAR,CAAsB,MAAtB,EAA8B,GAA9B,CAAP;AACA;AAXY,CAAd;;AAcA,QAAQ,MAAR,CAAe,MAAf,CAAsB,UAAS,MAAT,EAAiB,GAAjB,EAAsB;AAC3C,KAAI,SAAJ,GAAgB,IAAI,IAAJ,EAAhB;AACA,KAAI,SAAJ,GAAgB,MAAhB;AACA,KAAI,UAAJ,GAAiB,IAAI,SAArB;AACA,KAAI,UAAJ,GAAiB,IAAI,SAArB;;AAGA,KAAG,CAAC,IAAI,SAAR,EAAmB,IAAI,SAAJ,GAAgB,MAAhB;AACnB,CARD;;AAUA,QAAQ,MAAR,CAAe,MAAf,CAAsB,UAAS,MAAT,EAAiB,GAAjB,EAAsB,UAAtB,EAAkC,QAAlC,EAA4C,OAA5C,EAAqD;AAC1E,UAAS,IAAT,GAAgB,SAAS,IAAT,IAAiB,EAAjC;AACA,UAAS,IAAT,CAAc,UAAd,GAA2B,IAAI,IAAJ,EAA3B;AACA,UAAS,IAAT,CAAc,UAAd,GAA2B,MAA3B;AAGA,CAND;;AAQA,QAAQ,MAAR,CAAe,MAAf,CAAsB,UAAS,MAAT,EAAiB,GAAjB,EAAsB,CAE3C,CAFD;;AAIA,QAAQ,KAAR,CAAc,MAAd,CAAqB,UAAS,MAAT,EAAiB,GAAjB,EAAsB,CAE1C,CAFD;;AAIA,QAAQ,KAAR,CAAc,MAAd,CAAqB,UAAS,MAAT,EAAiB,GAAjB,EAAsB,UAAtB,EAAkC,QAAlC,EAA4C,OAA5C,EAAqD,CAEzE,CAFD;;AAIA,QAAQ,KAAR,CAAc,MAAd,CAAqB,UAAS,MAAT,EAAiB,GAAjB,EAAsB,CAE1C,CAFD,wE;;;;;;;;;;;AC5CA,OAAO,GAAP,CAAW,YAAY,CAEtB,CAFD,4F;;;;;;;;;;;ACAA,OAAO,OAAP,CAAe,UAAf,EAA2B,YAAY;AACnC,WAAO,SAAS,IAAT,EAAP;AACH,CAFD,oH;;;;;;;;;;;ACAA,OAAO,OAAP,CAAe,eAAf,EAAgC,YAAY;AACxC,WAAO,cAAc,IAAd,EAAP;AACH,CAFD,oH;;;;;;;;;;;ACAA,OAAO,OAAP,CAAe,MAAf,EAAuB,YAAY;AAC/B,WAAO,KAAK,IAAL,EAAP;AACH,CAFD,oH;;;;;;;;;;;ACAA,OAAO,OAAP,CAAe,MAAf,EAAuB,YAAY;AAC/B,WAAO,KAAK,IAAL,EAAP;AACH,CAFD,oH;;;;;;;;;;;ACAA,OAAO,OAAP,CAAe,WAAf,EAA4B,YAAY;AACpC,WAAO,UAAU,IAAV,EAAP;AACH,CAFD,oH;;;;;;;;;;;ACAA,OAAO,OAAP,CAAe,eAAf,EAAgC,YAAY;AACxC,WAAO,cAAc,IAAd,EAAP;AACH,CAFD,oH;;;;;;;;;;;ACAA,OAAO,OAAP,CAAe,WAAf,EAA4B,YAAY;AACpC,WAAO,UAAU,IAAV,EAAP;AACH,CAFD,oH;;;;;;;;;;;ACAA,OAAO,OAAP,CAAe,eAAf,EAAgC,YAAY;AACxC,WAAO,cAAc,IAAd,EAAP;AACH,CAFD,oH;;;;;;;;;;;ACAA,OAAO,OAAP,CAAe,sBAAf,EAAuC,YAAY;AAC/C,WAAO,qBAAqB,IAArB,EAAP;AACH,CAFD,oH;;;;;;;;;;;ACAA,OAAO,OAAP,CAAe,SAAf,EAA0B,YAAY;AAClC,WAAO,QAAQ,IAAR,EAAP;AACH,CAFD,oH;;;;;;;;;;;ACAA,OAAO,OAAP,CAAe,SAAf,EAA0B,YAAY;AAClC,WAAO,QAAQ,IAAR,EAAP;AACH,CAFD,oH;;;;;;;;;;;ACAA,IAAI,cAAc,KAAlB;;AAEA,SAAS,MAAT,CAAgB,EAAE,uBAAuB,WAAzB,EAAhB;;AAEA,OAAO,OAAP,CAAe,YAAW;;AAEzB,KAAG,OAAO,QAAP,IAAmB,OAAO,QAAP,CAAgB,GAAnC,IAA0C,EAAE,QAAF,CAAW,OAAO,QAAP,CAAgB,GAA3B,CAA7C,EAA8E;AAC7E,OAAI,IAAI,YAAR,IAAwB,OAAO,QAAP,CAAgB,GAAxC,EAA6C;AAC5C,WAAQ,GAAR,CAAY,YAAZ,IAA4B,OAAO,QAAP,CAAgB,GAAhB,CAAoB,YAApB,CAA5B;AACA;AACD;;;;;;;;;;;;;;;;;;;;AAoBD,KAAG,YAAY,SAAS,yBAArB,IAAkD,OAAO,QAAzD,IAAqE,OAAO,QAAP,CAAgB,KAArF,IAA8F,EAAE,QAAF,CAAW,OAAO,QAAP,CAAgB,KAA3B,CAAjG,EAAoI;;AAEnI,MAAG,OAAO,QAAP,CAAgB,KAAhB,CAAsB,MAAtB,IAAgC,EAAE,QAAF,CAAW,OAAO,QAAP,CAAgB,KAAhB,CAAsB,MAAjC,CAAnC,EAA6E;;AAE5E,YAAS,yBAAT,CAAmC,MAAnC,CAA0C;AACzC,aAAS;AADgC,IAA1C;;AAIA,OAAI,iBAAiB,OAAO,QAAP,CAAgB,KAAhB,CAAsB,MAA3C;AACA,kBAAe,OAAf,GAAyB,QAAzB;;;AAGA,YAAS,yBAAT,CAAmC,MAAnC,CAA0C,cAA1C;AACA;;AAED,MAAG,OAAO,QAAP,CAAgB,KAAhB,CAAsB,MAAtB,IAAgC,EAAE,QAAF,CAAW,OAAO,QAAP,CAAgB,KAAhB,CAAsB,MAAjC,CAAnC,EAA6E;;AAE5E,YAAS,yBAAT,CAAmC,MAAnC,CAA0C;AACzC,aAAS;AADgC,IAA1C;;AAIA,OAAI,iBAAiB,OAAO,QAAP,CAAgB,KAAhB,CAAsB,MAA3C;AACA,kBAAe,OAAf,GAAyB,QAAzB;;;AAGA,YAAS,yBAAT,CAAmC,MAAnC,CAA0C,cAA1C;AACA;;AAED,MAAG,OAAO,QAAP,CAAgB,KAAhB,CAAsB,QAAtB,IAAkC,EAAE,QAAF,CAAW,OAAO,QAAP,CAAgB,KAAhB,CAAsB,QAAjC,CAArC,EAAiF;;AAEhF,YAAS,yBAAT,CAAmC,MAAnC,CAA0C;AACzC,aAAS;AADgC,IAA1C;;AAIA,OAAI,iBAAiB,OAAO,QAAP,CAAgB,KAAhB,CAAsB,QAA3C;AACA,kBAAe,OAAf,GAAyB,UAAzB;;;AAGA,YAAS,yBAAT,CAAmC,MAAnC,CAA0C,cAA1C;AACA;;AAED,MAAG,OAAO,QAAP,CAAgB,KAAhB,CAAsB,QAAtB,IAAkC,EAAE,QAAF,CAAW,OAAO,QAAP,CAAgB,KAAhB,CAAsB,QAAjC,CAArC,EAAiF;;AAEhF,YAAS,yBAAT,CAAmC,MAAnC,CAA0C;AACzC,aAAS;AADgC,IAA1C;;AAIA,OAAI,iBAAiB,OAAO,QAAP,CAAgB,KAAhB,CAAsB,QAA3C;AACA,kBAAe,OAAf,GAAyB,UAAzB;;;AAGA,YAAS,yBAAT,CAAmC,MAAnC,CAA0C,cAA1C;AACA;;AAED,MAAG,OAAO,QAAP,CAAgB,KAAhB,CAAsB,OAAtB,IAAiC,EAAE,QAAF,CAAW,OAAO,QAAP,CAAgB,KAAhB,CAAsB,OAAjC,CAApC,EAA+E;;AAE9E,YAAS,yBAAT,CAAmC,MAAnC,CAA0C;AACzC,aAAS;AADgC,IAA1C;;AAIA,OAAI,iBAAiB,OAAO,QAAP,CAAgB,KAAhB,CAAsB,OAA3C;AACA,kBAAe,OAAf,GAAyB,SAAzB;;;AAGA,YAAS,yBAAT,CAAmC,MAAnC,CAA0C,cAA1C;AACA;;AAED,MAAG,OAAO,QAAP,CAAgB,KAAhB,CAAsB,MAAtB,IAAgC,EAAE,QAAF,CAAW,OAAO,QAAP,CAAgB,KAAhB,CAAsB,MAAjC,CAAnC,EAA6E;;AAE5E,YAAS,yBAAT,CAAmC,MAAnC,CAA0C;AACzC,aAAS;AADgC,IAA1C;;AAIA,OAAI,iBAAiB,OAAO,QAAP,CAAgB,KAAhB,CAAsB,MAA3C;AACA,kBAAe,OAAf,GAAyB,kBAAzB;;;AAGA,YAAS,yBAAT,CAAmC,MAAnC,CAA0C,cAA1C;AACA;AACD;;AAED,KAAI,MAAM,uBAAV;AACG,MAAK,WAAL,CAAiB,GAAjB,EAAsB,CAAC,YAAD,CAAtB,EAAsC;AAClC,cAAY,QADsB;AAElC,cAAY;AAFsB,EAAtC;AAIA,SAAQ,WAAR,CAAoB,GAApB,EAAyB,CAAC,cAAD,CAAzB,EAA2C;AACvC,cAAY,QAD2B;AAEvC,cAAY;AAF2B,EAA3C;AAIA,UAAS,WAAT,CAAqB,GAArB,EAA0B,CAAC,gBAAD,CAA1B,EAA8C;AAC1C,cAAY,QAD8B;AAE1C,cAAY;AAF8B,EAA9C;AAIA,eAAc,WAAd,CAA0B,GAA1B,EAA+B,CAAC,iBAAD,CAA/B,EAAoD;AAChD,cAAY,QADoC;AAEhD,cAAY;AAFoC,EAApD;AAIA,MAAK,WAAL,CAAiB,GAAjB,EAAsB,CAAC,aAAD,CAAtB,EAAuC;AACnC,cAAY,QADuB;AAEnC,cAAY;AAFuB,EAAvC;AAIA,WAAU,WAAV,CAAsB,GAAtB,EAA2B,CAAC,kBAAD,CAA3B,EAAiD;AAC7C,cAAY,QADiC;AAE7C,cAAY;AAFiC,EAAjD;AAIA,eAAc,WAAd,CAA0B,GAA1B,EAA+B,CAAC,EAAD,CAA/B,EAAqC;AACjC,cAAY,QADqB;AAEjC,cAAY;AAFqB,EAArC;AAIA,WAAU,WAAV,CAAsB,GAAtB,EAA2B,CAAC,kBAAD,CAA3B,EAAiD;AAC7C,cAAY,QADiC;AAE7C,cAAY;AAFiC,EAAjD;AAIA,eAAc,WAAd,CAA0B,GAA1B,EAA+B,CAAC,kBAAD,CAA/B,EAAqD;AACjD,cAAY,QADqC;AAEjD,cAAY;AAFqC,EAArD;;;;;;;;;;;;;;;AAmBH,CA/JD;;AAiKA,OAAO,OAAP,CAAe;AACd,sBAAqB,2BAAS,OAAT,EAAkB;AACtC,MAAG,CAAC,MAAM,OAAN,CAAc,OAAO,MAAP,EAAd,CAAJ,EAAoC;AACnC,SAAM,IAAI,OAAO,KAAX,CAAiB,GAAjB,EAAsB,gBAAtB,CAAN;AACA;;AAED,MAAI,cAAc,EAAlB;AACA,MAAG,QAAQ,QAAX,EAAqB,YAAY,QAAZ,GAAuB,QAAQ,QAA/B;AACrB,MAAG,QAAQ,KAAX,EAAkB,YAAY,KAAZ,GAAoB,QAAQ,KAA5B;AAClB,MAAG,QAAQ,QAAX,EAAqB,YAAY,QAAZ,GAAuB,QAAQ,QAA/B;AACrB,MAAG,QAAQ,OAAX,EAAoB,YAAY,OAAZ,GAAsB,QAAQ,OAA9B;AACpB,MAAG,QAAQ,OAAR,IAAmB,QAAQ,OAAR,CAAgB,KAAtC,EAA6C,YAAY,KAAZ,GAAoB,QAAQ,OAAR,CAAgB,KAApC;;AAE7C,WAAS,UAAT,CAAoB,WAApB;AACA,EAda;AAed,sBAAqB,2BAAS,MAAT,EAAiB,OAAjB,EAA0B;;AAE9C,MAAG,EAAE,MAAM,OAAN,CAAc,OAAO,MAAP,EAAd,KAAkC,UAAU,OAAO,MAAP,EAA9C,CAAH,EAAmE;AAClE,SAAM,IAAI,OAAO,KAAX,CAAiB,GAAjB,EAAsB,gBAAtB,CAAN;AACA;;;AAGD,MAAG,CAAC,MAAM,OAAN,CAAc,OAAO,MAAP,EAAd,CAAJ,EAAoC;AACnC,OAAI,OAAO,OAAO,IAAP,CAAY,OAAZ,CAAX;AACA,OAAG,KAAK,MAAL,KAAgB,CAAhB,IAAqB,CAAC,QAAQ,OAAjC,EAA0C;AACzC,UAAM,IAAI,OAAO,KAAX,CAAiB,GAAjB,EAAsB,gBAAtB,CAAN;AACA;AACD;;AAED,MAAI,cAAc,EAAlB;AACA,MAAG,QAAQ,QAAX,EAAqB,YAAY,QAAZ,GAAuB,QAAQ,QAA/B;AACrB,MAAG,QAAQ,KAAX,EAAkB,YAAY,KAAZ,GAAoB,QAAQ,KAA5B;AAClB,MAAG,QAAQ,QAAX,EAAqB,YAAY,QAAZ,GAAuB,QAAQ,QAA/B;AACrB,MAAG,QAAQ,OAAX,EAAoB,YAAY,OAAZ,GAAsB,QAAQ,OAA9B;;AAEpB,MAAG,QAAQ,OAAR,IAAmB,QAAQ,OAAR,CAAgB,KAAtC,EAA6C,YAAY,KAAZ,GAAoB,QAAQ,OAAR,CAAgB,KAApC;AAC7C,MAAG,QAAQ,KAAX,EAAkB,YAAY,KAAZ,GAAoB,QAAQ,KAA5B;;AAElB,MAAG,YAAY,KAAf,EAAsB;AACrB,OAAI,QAAQ,YAAY,KAAxB;AACA,UAAO,YAAY,KAAnB;AACA,eAAY,MAAZ,GAAqB,CAAC,EAAE,SAAS,KAAX,EAAD,CAArB;AACA;;AAED,MAAI,WAAW,EAAf;AACA,MAAG,YAAY,QAAf,EAAyB;AACxB,cAAW,YAAY,QAAvB;AACA,UAAO,YAAY,QAAnB;AACA;;AAED,MAAG,WAAH,EAAgB;AACf,SAAM,MAAN,CAAa,MAAb,EAAqB,EAAE,MAAM,WAAR,EAArB;AACA;;AAED,MAAG,QAAH,EAAa;AACZ,YAAS,WAAT,CAAqB,MAArB,EAA6B,QAA7B;AACA;AACD,EAzDa;AA0Dd,aAAY,kBAAS,OAAT,EAAkB;AAC7B,OAAK,OAAL;;AAEA,QAAM,IAAN,CAAW,OAAX;AACA,EA9Da;AA+Dd,iBAAgB,sBAAS,QAAT,EAAmB,MAAnB,EAA2B;AAC1C,UAAQ,GAAR,CAAY,cAAZ;AACA,MAAG,CAAE,MAAM,OAAN,CAAc,OAAO,MAAP,EAAd,CAAL,EAAsC;AACrC,SAAM,IAAI,OAAO,KAAX,CAAiB,GAAjB,EAAsB,oEAAtB,CAAN;AACA;;AAED,MAAI,SAAS,QAAQ,OAAR,CAAgB,QAAhB,CAAb;AACA,UAAQ,GAAR,CAAY,MAAZ;AACA,MAAG,MAAH,EAAU;AACT,OAAI,MAAM,OAAO,GAAjB;AACA,OAAI,UAAU,WAAW,OAAO,MAAP,CAAc,OAAzB,CAAd;AACA,OAAI,UAAU,WAAW,OAAO,MAAP,CAAc,OAAzB,CAAd;AACA,OAAI,QAAQ,WAAW,OAAO,MAAP,CAAc,KAAzB,CAAZ;AACA,OAAI,SAAS,WAAW,OAAO,MAAP,CAAc,MAAzB,CAAb;AACA,OAAI,SAAS,WAAW,OAAO,MAAP,CAAc,MAAzB,CAAb;AACA,OAAG,SAAS,MAAZ,EAAmB;AAClB,UAAM,IAAI,OAAO,KAAX,CAAiB,GAAjB,EAAsB,2CAAtB,CAAN;AACA,IAFD,MAGK,IAAG,SAAS,MAAZ,EAAmB;AACvB,UAAM,IAAI,OAAO,KAAX,CAAiB,GAAjB,EAAsB,8CAAtB,CAAN;AACA,IAFI,MAGA,IAAG,UAAU,MAAb,EAAoB;AACxB,UAAM,IAAI,OAAO,KAAX,CAAiB,GAAjB,EAAsB,0CAAtB,CAAN;AACA;;AAED,YAAS;AACR,UAAM,OAAO,MAAP,CAAc,IADZ;AAER,aAAS,OAFD;AAGR,aAAS,OAHD;AAIR,WAAO,KAJC;AAKR,UAAM,OAAO,MAAP,CAAc,IALZ;AAMR,WAAO,SAAO,MAAI,OAAX,IAAoB,OANnB;AAOR,YAAQ,OAAO,MAAP,CAAc,MAPd;AAQR,YAAQ,MARA;AASR,YAAQ;AATA,IAAT;;AAYA,WAAQ,MAAR,CAAe,QAAf,EAAwB,EAAC,MAAM,MAAP,EAAxB;AACA,GA9BD,MA+BI;AACH,SAAM,IAAI,OAAO,KAAX,CAAiB,GAAjB,EAAsB,uBAAtB,CAAN;AACA;AACD,EAzGa;AA0Gd,wBAAuB,6BAAS,MAAT,EAAgB;AACtC,MAAG,CAAE,MAAM,OAAN,CAAc,OAAO,MAAP,EAAd,CAAL,EAAsC;AACrC,SAAM,IAAI,OAAO,KAAX,CAAiB,GAAjB,EAAsB,iEAAtB,CAAN;AACA;;AAED,MAAI,OAAO;AACV,OAAI,OAAO,OAAP,CAAe,EADT;AAEV,SAAM,CAFI;AAGV,QAAK,SAAS,OAAO,OAAP,CAAe,QAAxB,CAHK;AAIV,WAAQ,SAAS,OAAO,OAAP,CAAe,MAAxB,CAJE;AAKV,QAAK,SAAS,OAAO,OAAP,CAAe,MAAxB;AALK,GAAX;;AAQA,uBAAqB,MAArB,CAA4B,IAA5B,EAAiC,IAAjC;AACA,UAAQ,GAAR,CAAY,iBAAZ,EAA8B,MAA9B;AACA;AAzHa,CAAf;;AA4HA,SAAS,YAAT,CAAsB,UAAU,OAAV,EAAmB,IAAnB,EAAyB;AAC9C,MAAK,KAAL,GAAa,CAAC,MAAD,CAAb;;AAEA,KAAG,QAAQ,OAAX,EAAoB;AACnB,OAAK,OAAL,GAAe,QAAQ,OAAvB;AACA;;AAGD,QAAO,IAAP;AACA,CATD;;AAWA,SAAS,oBAAT,CAA8B,UAAS,IAAT,EAAe;;;AAG5C,KAAG,KAAK,IAAL,IAAa,MAAM,QAAN,CAAe,KAAK,IAAL,CAAU,GAAzB,EAA8B,SAA9B,CAAhB,EAA0D;AACzD,QAAM,IAAI,OAAO,KAAX,CAAiB,GAAjB,EAAsB,0BAAtB,CAAN;AACA;;AAEA,KAAG,eAAe,KAAK,IAApB,IAA4B,KAAK,IAAL,CAAU,MAAtC,IAAgD,KAAK,IAAL,CAAU,MAAV,CAAiB,MAAjE,IAA2E,CAAC,KAAK,IAAL,CAAU,MAAV,CAAiB,CAAjB,EAAoB,QAAnG,EAA8G;AAC7G,QAAM,IAAI,OAAO,KAAX,CAAiB,GAAjB,EAAsB,sBAAtB,CAAN;AACA;;AAEF,QAAO,IAAP;AACA,CAZD;;AAeA,MAAM,MAAN,CAAa,MAAb,CAAoB,UAAS,MAAT,EAAiB,GAAjB,EAAsB;AACzC,KAAG,IAAI,MAAJ,IAAc,IAAI,MAAJ,CAAW,CAAX,CAAd,IAA+B,IAAI,MAAJ,CAAW,CAAX,EAAc,OAAhD,EAAyD;AACxD,MAAI,OAAJ,GAAc,IAAI,OAAJ,IAAe,EAA7B;AACA,MAAI,OAAJ,CAAY,KAAZ,GAAoB,IAAI,MAAJ,CAAW,CAAX,EAAc,OAAlC;AACA,EAHD,MAGO;;AAEN,MAAG,IAAI,QAAP,EAAiB;;AAEhB,OAAG,IAAI,QAAJ,CAAa,MAAb,IAAuB,IAAI,QAAJ,CAAa,MAAb,CAAoB,KAA9C,EAAqD;AACpD,QAAI,OAAJ,GAAc,IAAI,OAAJ,IAAe,EAA7B;AACA,QAAI,OAAJ,CAAY,KAAZ,GAAoB,IAAI,QAAJ,CAAa,MAAb,CAAoB,KAAxC;AACA,IAHD,MAGO;;AAEN,QAAG,IAAI,QAAJ,CAAa,MAAb,IAAuB,IAAI,QAAJ,CAAa,MAAb,CAAoB,WAA9C,EAA2D;AAC1D,SAAI,SAAS,IAAI,MAAJ,CAAW;AACvB,eAAS,OADc;AAEvB,eAAS;AAFc,MAAX,CAAb;;AAKA,YAAO,YAAP,CAAoB;AACnB,YAAM,OADa;AAEnB,aAAO,IAAI,QAAJ,CAAa,MAAb,CAAoB;AAFR,MAApB;;AAKA,SAAI;AACH,UAAI,SAAS,OAAO,IAAP,CAAY,SAAZ,CAAsB,EAAtB,CAAb;AACA,UAAI,QAAQ,EAAE,SAAF,CAAY,MAAZ,EAAoB,EAAE,SAAS,IAAX,EAApB,CAAZ;AACA,UAAG,CAAC,KAAD,IAAU,OAAO,MAAjB,IAA2B,EAAE,QAAF,CAAW,OAAO,CAAP,CAAX,CAA9B,EAAqD;AACpD,eAAQ,EAAE,OAAO,OAAO,CAAP,CAAT,EAAR;AACA;;AAED,UAAG,KAAH,EAAU;AACT,WAAI,OAAJ,GAAc,IAAI,OAAJ,IAAe,EAA7B;AACA,WAAI,OAAJ,CAAY,KAAZ,GAAoB,MAAM,KAA1B;AACA;AACD,MAXD,CAWE,OAAM,CAAN,EAAS;AACV,cAAQ,GAAR,CAAY,CAAZ;AACA;AACD,KAzBD,MAyBO;;AAEN,SAAG,IAAI,QAAJ,CAAa,QAAb,IAAyB,IAAI,QAAJ,CAAa,QAAb,CAAsB,YAAlD,EAAgE;AAC/D,UAAI,OAAJ,GAAc,IAAI,OAAJ,IAAe,EAA7B;AACA,UAAI,OAAJ,CAAY,IAAZ,GAAmB,IAAI,QAAJ,CAAa,QAAb,CAAsB,SAAtB,GAAkC,GAAlC,GAAwC,IAAI,QAAJ,CAAa,QAAb,CAAsB,QAAjF;AACA,UAAI,OAAJ,CAAY,KAAZ,GAAoB,IAAI,QAAJ,CAAa,QAAb,CAAsB,YAA1C;AACA,MAJD,MAIO;AACN,UAAG,IAAI,QAAJ,CAAa,QAAb,IAAyB,IAAI,QAAJ,CAAa,QAAb,CAAsB,KAAlD,EAAyD;AACxD,WAAI,OAAJ,GAAc,IAAI,OAAJ,IAAe,EAA7B;AACA,WAAI,OAAJ,CAAY,KAAZ,GAAoB,IAAI,QAAJ,CAAa,QAAb,CAAsB,KAA1C;AACA,OAHD,MAGO;AACN,WAAG,IAAI,QAAJ,CAAa,OAAb,IAAwB,IAAI,QAAJ,CAAa,OAAb,CAAqB,KAAhD,EAAuD;AACtD,YAAI,OAAJ,GAAc,IAAI,OAAJ,IAAe,EAA7B;AACA,YAAI,OAAJ,CAAY,KAAZ,GAAoB,IAAI,QAAJ,CAAa,OAAb,CAAqB,KAAzC;AACA,QAHD,MAGO;AACN,YAAG,IAAI,QAAJ,CAAa,kBAAb,KAAoC,IAAI,QAAJ,CAAa,kBAAb,EAAiC,MAArE,IAA+E,IAAI,QAAJ,CAAa,kBAAb,EAAiC,MAAjC,CAAwC,MAA1H,EAAkI;AACjI,aAAI,OAAJ,GAAc,IAAI,OAAJ,IAAe,EAA7B;AACA,aAAI,OAAJ,CAAY,KAAZ,GAAoB,IAAI,QAAJ,CAAa,kBAAb,EAAiC,MAAjC,CAAwC,CAAxC,EAA2C,OAA/D;AACA;AACD;AACD;AACD;AACD;AACD;AACD;AACD;AACD,CAhED;;AAkEA,MAAM,MAAN,CAAa,MAAb,CAAoB,UAAS,MAAT,EAAiB,GAAjB,EAAsB,UAAtB,EAAkC,QAAlC,EAA4C,OAA5C,EAAqD;AACxE,KAAG,SAAS,IAAT,IAAiB,SAAS,IAAT,CAAc,MAA/B,IAAyC,SAAS,IAAT,CAAc,MAAd,CAAqB,MAA9D,IAAwE,SAAS,IAAT,CAAc,MAAd,CAAqB,CAArB,EAAwB,OAAnG,EAA4G;AAC3G,WAAS,IAAT,CAAc,OAAd,CAAsB,KAAtB,GAA8B,SAAS,IAAT,CAAc,MAAd,CAAqB,CAArB,EAAwB,OAAtD;AACA;AACD,CAJD;;AAMA,SAAS,OAAT,CAAiB,UAAU,IAAV,EAAgB,CAEhC,CAFD;;AAIA,SAAS,IAAT,CAAc,aAAd,GAA8B,UAAU,KAAV,EAAiB;AAC9C,QAAO,OAAO,WAAP,CAAmB,oBAAoB,KAAvC,CAAP;AACA,CAFD;;AAIA,SAAS,IAAT,CAAc,WAAd,GAA4B,UAAU,KAAV,EAAiB;AAC5C,QAAO,OAAO,WAAP,CAAmB,kBAAkB,KAArC,CAAP;AACA,CAFD,sH","file":"/app.js","sourcesContent":["this.isFloat = function(n) {\n    return n === +n && n !== (n|0);\n}\n\nthis.isInteger = function(n) {\n    return n === +n && n === (n|0);\n}","/*\n   Returns property value, where property name is given as path.\n\n   Example:\n\n       getPropertyValue(\"x.y.z\", {x: { y: { z: 123}}});\n*/\n\nthis.getPropertyValue = function(propertyName, obj) {\n\treturn propertyName.split('.').reduce(function(o, i) { return o[i]; }, obj);\t\n};\n\n\n/* \n   converts properties in format { \"x.y\": \"z\" } to { x: { y: \"z\" } }\n*/\n\nthis.deepen = function(o) {\n\tvar oo = {}, t, parts, part;\n\tfor (var k in o) {\n\t\tt = oo;\n\t\tparts = k.split('.');\n\t\tvar key = parts.pop();\n\t\twhile (parts.length) {\n\t\t\tpart = parts.shift();\n\t\t\tt = t[part] = t[part] || {};\n\t\t}\n\t\tt[key] = o[k];\n\t}\n\treturn oo;\n};\n\n/*\n\tFunction converts array of objects to csv, tsv or json string\n\n\texportFields: list of object keys to export (array of strings)\n\tfileType: can be \"json\", \"csv\", \"tsv\" (string)\n*/\n\nthis.convertArrayOfObjects = function(data, exportFields, fileType) {\n\tdata = data || [];\n\tfileType = fileType || \"csv\";\n\texportFields = exportFields || [];\n\n\tvar str = \"\";\n\t// export to JSON\n\tif(fileType == \"json\") {\n\n\t\tvar tmp = [];\n\t\t_.each(data, function(doc) {\n\t\t\tvar obj = {};\n\t\t\t_.each(exportFields, function(field) {\n\t\t\t\tobj[field] = doc[field];\n\t\t\t});\n\t\t\ttmp.push(obj);\n\t\t});\n\n\t\tstr = JSON.stringify(tmp);\n\t}\n\n\t// export to CSV or TSV\n\tif(fileType == \"csv\" || fileType == \"tsv\") {\n\t\tvar columnSeparator = \"\";\n\t\tif(fileType == \"csv\") {\n\t\t\tcolumnSeparator = \",\";\n\t\t}\n\t\tif(fileType == \"tsv\") {\n\t\t\tcolumnSeparator = \"\\t\";\n\t\t}\n\n\t\t_.each(exportFields, function(field, i) {\n\t\t\tif(i > 0) {\n\t\t\t\tstr = str + columnSeparator;\n\t\t\t}\n\t\t\tstr = str + \"\\\"\" + field + \"\\\"\";\n\t\t});\n\t\tstr = str + \"\\r\\n\";\n\n\t\t_.each(data, function(doc) {\n\t\t\t_.each(exportFields, function(field, i) {\n\t\t\t\tif(i > 0) {\n\t\t\t\t\tstr = str + columnSeparator;\n\t\t\t\t}\n\n\t\t\t\tvar value = getPropertyValue(field, doc) + \"\";\n\t\t\t\tvalue = value.replace(/\"/g, '\"\"');\n\t\t\t\tif(typeof(value) == \"undefined\")\n\t\t\t\t\tstr = str + \"\\\"\\\"\";\n\t\t\t\telse\n\t\t\t\t\tstr = str + \"\\\"\" + value + \"\\\"\";\n\t\t\t});\n\t\t\tstr = str + \"\\r\\n\";\n\t\t});\n\t}\n\n\treturn str;\n};\n","this.escapeRegEx = function (string) {\n\treturn string.replace(/([.*+?^=!:${}()|\\[\\]\\/\\\\])/g, \"\\\\$1\");\n}\n\nthis.replaceSubstrings = function(string, find, replace) {\n\treturn string.replace(new RegExp(escapeRegEx(find), 'g'), replace);\n};\n\nthis.joinStrings = function(stringArray, join) {\n\tvar sep = join || \", \";\n\tvar res = \"\";\n\t_.each(stringArray, function(str) {\n\t\tif(str) {\n\t\t\tif(res)\n\t\t\t\tres = res + sep;\n\t\t\tres = res + str;\n\t\t}\t\t\n\t});\n\treturn res;\n};\n","this.Ethercat = new Mongo.Collection(\"ethercat\");\n\nthis.Ethercat.userCanInsert = function(userId, doc) {\n\treturn true;\n}\n\nthis.Ethercat.userCanUpdate = function(userId, doc) {\n\treturn true;\n}\n\nthis.Ethercat.userCanRemove = function(userId, doc) {\n\treturn true;\n}\n","this.EthercatUnits = new Mongo.Collection(\"ethercatunits\");\n\nthis.EthercatUnits.userCanInsert = function(userId, doc) {\n\treturn true;\n}\n\nthis.EthercatUnits.userCanUpdate = function(userId, doc) {\n\treturn true;\n}\n\nthis.EthercatUnits.userCanRemove = function(userId, doc) {\n\treturn true;\n}\n","this.Gpio = new Mongo.Collection(\"gpio\");\n\nthis.Gpio.userCanInsert = function(userId, doc) {\n\treturn true;\n}\n\nthis.Gpio.userCanUpdate = function(userId, doc) {\n\treturn true;\n}\n\nthis.Gpio.userCanRemove = function(userId, doc) {\n\treturn true;\n}\n","this.Mbus = new Mongo.Collection(\"mbus\");\n\nthis.Mbus.userCanInsert = function(userId, doc) {\n\treturn true;\n}\n\nthis.Mbus.userCanUpdate = function(userId, doc) {\n\treturn true;\n}\n\nthis.Mbus.userCanRemove = function(userId, doc) {\n\treturn true;\n}\n","this.ModbusRtu = new Mongo.Collection(\"modbusrtu\");\n\nthis.ModbusRtu.userCanInsert = function(userId, doc) {\n\treturn true;\n}\n\nthis.ModbusRtu.userCanUpdate = function(userId, doc) {\n\treturn true;\n}\n\nthis.ModbusRtu.userCanRemove = function(userId, doc) {\n\treturn true;\n}\n","this.ModbusRtuRead = new Mongo.Collection(\"modbusrturead\");\n\nthis.ModbusRtuRead.userCanInsert = function(userId, doc) {\n\treturn true;\n}\n\nthis.ModbusRtuRead.userCanUpdate = function(userId, doc) {\n\treturn true;\n}\n\nthis.ModbusRtuRead.userCanRemove = function(userId, doc) {\n\treturn true;\n}\n","this.ModbusTcp = new Mongo.Collection(\"modbustcp\");\n\nthis.ModbusTcp.userCanInsert = function(userId, doc) {\n\treturn true;\n}\n\nthis.ModbusTcp.userCanUpdate = function(userId, doc) {\n\treturn true;\n}\n\nthis.ModbusTcp.userCanRemove = function(userId, doc) {\n\treturn true;\n}\n","this.ModbusTcpRead = new Mongo.Collection(\"modbustcpread\");\n\nthis.ModbusTcpRead.userCanInsert = function(userId, doc) {\n\treturn true;\n}\n\nthis.ModbusTcpRead.userCanUpdate = function(userId, doc) {\n\treturn true;\n}\n\nthis.ModbusTcpRead.userCanRemove = function(userId, doc) {\n\treturn true;\n}\n","this.ModbusTcpReadCommand = new Mongo.Collection(\"modbustcpreadcommand\");\n\nthis.ModbusTcpReadCommand.userCanInsert = function(userId, doc) {\n\treturn true;\n}\n\nthis.ModbusTcpReadCommand.userCanUpdate = function(userId, doc) {\n\treturn true;\n}\n\nthis.ModbusTcpReadCommand.userCanRemove = function(userId, doc) {\n\treturn true;\n}\n","this.OneWire = new Mongo.Collection(\"onewire\");\n\nthis.OneWire.userCanInsert = function(userId, doc) {\n\treturn true;\n}\n\nthis.OneWire.userCanUpdate = function(userId, doc) {\n\treturn true;\n}\n\nthis.OneWire.userCanRemove = function(userId, doc) {\n\treturn true;\n}\n","this.Signals = new Mongo.Collection(\"signals\");\n\nthis.Signals.userCanInsert = function(userId, doc) {\n\treturn true;\n}\n\nthis.Signals.userCanUpdate = function(userId, doc) {\n\treturn true;\n}\n\nthis.Signals.userCanRemove = function(userId, doc) {\n\treturn true;\n}\n","Ethercat.allow({\n\tinsert: function (userId, doc) {\n\t\treturn Ethercat.userCanInsert(userId, doc);\n\t},\n\n\tupdate: function (userId, doc, fields, modifier) {\n\t\treturn Ethercat.userCanUpdate(userId, doc);\n\t},\n\n\tremove: function (userId, doc) {\n\t\treturn Ethercat.userCanRemove(userId, doc);\n\t}\n});\n\nEthercat.before.insert(function(userId, doc) {\n\tdoc.createdAt = new Date();\n\tdoc.createdBy = userId;\n\tdoc.modifiedAt = doc.createdAt;\n\tdoc.modifiedBy = doc.createdBy;\n\n\t\n\tif(!doc.createdBy) doc.createdBy = userId;\n});\n\nfunction getEthercatValue(_in) {\n    //console.log(_in);\n    var values = Ethercat.findOne();\n    if (values) {\n        var memory = [];\n        values.message.obytes.forEach(function(o, i) {\n            memory.push(o);\n        });\n        values.message.ibytes.forEach(function(o, i) {\n            memory.push(o);\n        });\n        \n        var oby = _in.offsetbyte;\n        var obi = _in.offsetbit;\n        var bl = _in.bitlength;\n        \n        var nofBytesWithOffset = Math.ceil((bl+obi)/8);\n        var nofBitsWithOffset = (bl+obi) % 8;\n        \n        //Group affected bytes into an int\n        var appendedMemory = 0;\n        for(var i = 0;i < nofBytesWithOffset;i++){ \n            appendedMemory += (memory[oby+i] << (8*i));\n        }\n        \n        var mask = 1;\n        for(var i = 1; i<bl;i++){ //append ones\n            mask = (mask << 1);\n            mask += 1;\n        }\n        \n        for(var i = 0; i<obi;i++){ //append zeros\n            mask = (mask << 1);\n        }\n        return (appendedMemory & mask) >> obi;\n    } else {\n        throw new Meteor.Error(\"No EtherCat data available.\");\n    }\n}\n\nEthercat.before.update(function(userId, doc, fieldNames, modifier, options) {\n\tmodifier.$set = modifier.$set || {};\n\tmodifier.$set.modifiedAt = new Date();\n\tmodifier.$set.modifiedBy = userId;\n\n\t\n});\n\nEthercat.before.remove(function(userId, doc) {\n\t\n});\n\nEthercat.after.insert(function(userId, doc) {\n\t\n});\n\nEthercat.after.update(function(userId, doc, fieldNames, modifier, options) {\n\tconsole.log(\"Ethercat - afterUpdate\");\n\tvar esignals = Signals.find({bus: \"ethercat\"});\n\tesignals.forEach(function(sig,i){\n\t\tvar val = getEthercatValue(sig);\n\t\tSignals.update(sig._id,{$set:{value: sig.scale*(val+sig.offsetA)+sig.offsetB, raw: val, timestamp: doc.message.time}})\n\t});\n});\n\nEthercat.after.remove(function(userId, doc) {\n\t\n});\n","EthercatUnits.allow({\n\tinsert: function (userId, doc) {\n\t\treturn EthercatUnits.userCanInsert(userId, doc);\n\t},\n\n\tupdate: function (userId, doc, fields, modifier) {\n\t\treturn EthercatUnits.userCanUpdate(userId, doc);\n\t},\n\n\tremove: function (userId, doc) {\n\t\treturn EthercatUnits.userCanRemove(userId, doc);\n\t}\n});\n\nEthercatUnits.before.insert(function(userId, doc) {\n\tdoc.createdAt = new Date();\n\tdoc.createdBy = userId;\n\tdoc.modifiedAt = doc.createdAt;\n\tdoc.modifiedBy = doc.createdBy;\n\n\t\n\tif(!doc.createdBy) doc.createdBy = userId;\n});\n\nEthercatUnits.before.update(function(userId, doc, fieldNames, modifier, options) {\n\tmodifier.$set = modifier.$set || {};\n\tmodifier.$set.modifiedAt = new Date();\n\tmodifier.$set.modifiedBy = userId;\n\n\t\n});\n\nEthercatUnits.before.remove(function(userId, doc) {\n\t\n});\n\nEthercatUnits.after.insert(function(userId, doc) {\n\tvar message = doc.message;\n\tvar sensorArr = [];\n\tfor(var num in message.slaves){\n\t\tvar slave = message.slaves[num];\n\t\tvar sensorid = slave.name;\n\t\tfor(var num2 in slave.inputs){\n\t\t\tvar channel = slave.inputs[num2];\n\t\t\tvar tempObj = {};\n\t\t\ttempObj[\"signal\"] = sensorid+\".\"+channel.name+\".\"+channel.offsetbyte+\".\"+channel.offsetbit+\".\"+channel.bitlength;\n\t\t\ttempObj[\"value\"] = null;\n\t\t\ttempObj[\"timestamp\"] = null;\n\t\t\ttempObj[\"offsetbyte\"] = channel.offsetbyte;\n\t\t\ttempObj[\"offsetbit\"] = channel.offsetbit;\n\t\t\ttempObj[\"bitlength\"] = channel.bitlength;\n\t\t\tsensorArr.push(tempObj);\n\t\t}\n\t}\n\n\tconsole.log(sensorArr);\n\n\tsensorArr.forEach(function(sensor,i){\n\t\tvar searchSignal = Signals.findOne({\"signal\":sensor.signal});\n\t\tif(searchSignal !== undefined){\n\t\t\tvar offsetA = searchSignal.offsetA;\n\t\t\tvar offsetB = searchSignal.offsetB;\n\t\t\tvar scale = searchSignal.scale;\n\t\t\tSignals.upsert({\"signal\":sensor.signal},{$set:{value: scale*(sensor.value+offsetA)+offsetB, raw: sensor.value, timestamp: sensor.timestamp}});\n\t\t}\n\t\telse{\n\t\t\tSignals.upsert({\"signal\":sensor.signal},{$set:{name: null,bus: \"ethercat\",value: sensor.value, raw: sensor.value, timestamp: sensor.timestamp, unit: unit, offsetA: 0.0, offsetB: 0.0, scale: 1.0, hidden: false, offsetbyte: sensor.offsetbyte, offsetbit: sensor.offsetbit, bitlength: sensor.bitlength}});\n\t\t}\n\t});\n});\n\nEthercatUnits.after.update(function(userId, doc, fieldNames, modifier, options) {\n\tconsole.log(\"EtherCatUnits - afterUpdate\");\n\tvar message = doc.message;\n\tvar sensorArr = [];\n\tfor(var num in message.slaves){\n\t\tvar slave = message.slaves[num];\n\t\tvar sensorid = slave.name;\n\t\tfor(var num2 in slave.inputs){\n\t\t\tvar channel = slave.inputs[num2];\n\t\t\tvar tempObj = {};\n\t\t\tconsole.log(channel);\n\t\t\ttempObj[\"signal\"] = sensorid+\".\"+channel.name+\".\"+channel.offsetbyte+\".\"+channel.offsetbit+\".\"+channel.bitlength;\n\t\t\ttempObj[\"value\"] = null;\n\t\t\ttempObj[\"timestamp\"] = null;\n\t\t\ttempObj[\"offsetbyte\"] = channel.offsetbyte;\n\t\t\ttempObj[\"offsetbit\"] = channel.offsetbit;\n\t\t\ttempObj[\"bitlength\"] = channel.bitlength;\n\t\t\tsensorArr.push(tempObj);\n\t\t}\n\t}\n\n\tconsole.log(sensorArr);\n\n\tsensorArr.forEach(function(sensor,i){\n\t\tvar searchSignal = Signals.findOne({\"signal\":sensor.signal});\n\t\tif(searchSignal !== undefined){\n\t\t\tvar offsetA = searchSignal.offsetA;\n\t\t\tvar offsetB = searchSignal.offsetB;\n\t\t\tvar scale = searchSignal.scale;\n\t\t\tSignals.upsert({\"signal\":sensor.signal},{$set:{value: scale*(sensor.value+offsetA)+offsetB, raw: sensor.value, timestamp: sensor.timestamp}});\n\t\t}\n\t\telse{\n\t\t\tSignals.upsert({\"signal\":sensor.signal},{$set:{name: null,bus: \"ethercat\",value: sensor.value, raw: sensor.value, timestamp: sensor.timestamp, unit: \"\", offsetA: 0.0, offsetB: 0.0, scale: 1.0, hidden: false, offsetbyte: sensor.offsetbyte, offsetbit: sensor.offsetbit, bitlength: sensor.bitlength}});\n\t\t}\n\t});\n});\n\nEthercatUnits.after.remove(function(userId, doc) {\n\t\n});\n","Gpio.allow({\n\tinsert: function (userId, doc) {\n\t\treturn Gpio.userCanInsert(userId, doc);\n\t},\n\n\tupdate: function (userId, doc, fields, modifier) {\n\t\treturn Gpio.userCanUpdate(userId, doc);\n\t},\n\n\tremove: function (userId, doc) {\n\t\treturn Gpio.userCanRemove(userId, doc);\n\t}\n});\n\nGpio.before.insert(function(userId, doc) {\n\tdoc.createdAt = new Date();\n\tdoc.createdBy = userId;\n\tdoc.modifiedAt = doc.createdAt;\n\tdoc.modifiedBy = doc.createdBy;\n\n\t\n\tif(!doc.createdBy) doc.createdBy = userId;\n});\n\nGpio.before.update(function(userId, doc, fieldNames, modifier, options) {\n\tmodifier.$set = modifier.$set || {};\n\tmodifier.$set.modifiedAt = new Date();\n\tmodifier.$set.modifiedBy = userId;\n\n\t\n});\n\nGpio.before.remove(function(userId, doc) {\n\t\n});\n\nGpio.after.insert(function(userId, doc) {\n\t\n});\n\nGpio.after.update(function(userId, doc, fieldNames, modifier, options) {\n\t\n});\n\nGpio.after.remove(function(userId, doc) {\n\t\n});\n","Mbus.allow({\n\tinsert: function (userId, doc) {\n\t\treturn Mbus.userCanInsert(userId, doc);\n\t},\n\n\tupdate: function (userId, doc, fields, modifier) {\n\t\treturn Mbus.userCanUpdate(userId, doc);\n\t},\n\n\tremove: function (userId, doc) {\n\t\treturn Mbus.userCanRemove(userId, doc);\n\t}\n});\n\nMbus.before.insert(function(userId, doc) {\n\tdoc.createdAt = new Date();\n\tdoc.createdBy = userId;\n\tdoc.modifiedAt = doc.createdAt;\n\tdoc.modifiedBy = doc.createdBy;\n\n\t\n\tif(!doc.createdBy) doc.createdBy = userId;\n});\n\nMbus.before.update(function(userId, doc, fieldNames, modifier, options) {\n\tmodifier.$set = modifier.$set || {};\n\tmodifier.$set.modifiedAt = new Date();\n\tmodifier.$set.modifiedBy = userId;\n\n\t\n});\n\nMbus.before.remove(function(userId, doc) {\n\t\n});\n\nMbus.after.insert(function(userId, doc) {\n\t\n});\n\nMbus.after.update(function(userId, doc, fieldNames, modifier, options) {\n\tconsole.log(\"Mbus - afterUpdate\");\n\tvar message = doc.message;\n    var sensorArr = [];\n    for (var key in message) {\n        if (message.hasOwnProperty(key)) {\n            var sensorid = key;\n\t\t\tfor(var valuekey in message[key]){\n\t\t\t\tvar tempObj = {};  \n\t\t\t\ttempObj[\"signal\"] = sensorid;\n\t\t\t\ttempObj[\"value\"] = message[key].value;\n\t\t\t\ttempObj[\"timestamp\"] = new Date(message[key].time);\n\t\t\t\ttempObj[\"unit\"] = message[key].unit;\n\t\t\t\tsensorArr.push(tempObj);\n\t\t\t}\n        }\n    }\n\n    sensorArr.forEach(function(sensor,i){\n\t\tvar searchSignal = Signals.findOne({\"signal\":sensor.signal});\n\t\tif(searchSignal !== undefined){\n\t\t\tvar offsetA = searchSignal.offsetA;\n\t\t\tvar offsetB = searchSignal.offsetB;\n\t\t\tvar scale = searchSignal.scale;\n\t\t\tSignals.upsert({\"signal\":sensor.signal},{$set:{value: scale*(sensor.value+offsetA)+offsetB, raw: sensor.value, timestamp: sensor.timestamp}});\n\t\t}\n\t\telse{\n\t\t\tSignals.upsert({\"signal\":sensor.signal},{$set:{name: null, bus: \"mbus\", value: sensor.value, raw: sensor.value, timestamp: sensor.timestamp, unit: sensor.unit, offsetA: 0.0, offsetB: 0.0, scale: 1.0, hidden: false}});\n\t\t}\n\t});\n});\n\nMbus.after.remove(function(userId, doc) {\n\t\n});\n","ModbusRtu.allow({\n\tinsert: function (userId, doc) {\n\t\treturn ModbusRtu.userCanInsert(userId, doc);\n\t},\n\n\tupdate: function (userId, doc, fields, modifier) {\n\t\treturn ModbusRtu.userCanUpdate(userId, doc);\n\t},\n\n\tremove: function (userId, doc) {\n\t\treturn ModbusRtu.userCanRemove(userId, doc);\n\t}\n});\n\nModbusRtu.before.insert(function(userId, doc) {\n\tdoc.createdAt = new Date();\n\tdoc.createdBy = userId;\n\tdoc.modifiedAt = doc.createdAt;\n\tdoc.modifiedBy = doc.createdBy;\n\n\t\n\tif(!doc.createdBy) doc.createdBy = userId;\n});\n\nModbusRtu.before.update(function(userId, doc, fieldNames, modifier, options) {\n\tmodifier.$set = modifier.$set || {};\n\tmodifier.$set.modifiedAt = new Date();\n\tmodifier.$set.modifiedBy = userId;\n\n\t\n});\n\nModbusRtu.before.remove(function(userId, doc) {\n\t\n});\n\nModbusRtu.after.insert(function(userId, doc) {\n\t\n});\n\nModbusRtu.after.update(function(userId, doc, fieldNames, modifier, options) {\n\t\n});\n\nModbusRtu.after.remove(function(userId, doc) {\n\t\n});\n","ModbusRtuRead.allow({\n\tinsert: function (userId, doc) {\n\t\treturn ModbusRtuRead.userCanInsert(userId, doc);\n\t},\n\n\tupdate: function (userId, doc, fields, modifier) {\n\t\treturn ModbusRtuRead.userCanUpdate(userId, doc);\n\t},\n\n\tremove: function (userId, doc) {\n\t\treturn ModbusRtuRead.userCanRemove(userId, doc);\n\t}\n});\n\nModbusRtuRead.before.insert(function(userId, doc) {\n\tdoc.createdAt = new Date();\n\tdoc.createdBy = userId;\n\tdoc.modifiedAt = doc.createdAt;\n\tdoc.modifiedBy = doc.createdBy;\n\n\t\n\tif(!doc.createdBy) doc.createdBy = userId;\n});\n\nModbusRtuRead.before.update(function(userId, doc, fieldNames, modifier, options) {\n\tmodifier.$set = modifier.$set || {};\n\tmodifier.$set.modifiedAt = new Date();\n\tmodifier.$set.modifiedBy = userId;\n\n\t\n});\n\nModbusRtuRead.before.remove(function(userId, doc) {\n\t\n});\n\nModbusRtuRead.after.insert(function(userId, doc) {\n\t\n});\n\nModbusRtuRead.after.update(function(userId, doc, fieldNames, modifier, options) {\n\t\n});\n\nModbusRtuRead.after.remove(function(userId, doc) {\n\t\n});\n","ModbusTcp.allow({\n\tinsert: function (userId, doc) {\n\t\treturn ModbusTcp.userCanInsert(userId, doc);\n\t},\n\n\tupdate: function (userId, doc, fields, modifier) {\n\t\treturn ModbusTcp.userCanUpdate(userId, doc);\n\t},\n\n\tremove: function (userId, doc) {\n\t\treturn ModbusTcp.userCanRemove(userId, doc);\n\t}\n});\n\nModbusTcp.before.insert(function(userId, doc) {\n\tdoc.createdAt = new Date();\n\tdoc.createdBy = userId;\n\tdoc.modifiedAt = doc.createdAt;\n\tdoc.modifiedBy = doc.createdBy;\n\n\t\n\tif(!doc.createdBy) doc.createdBy = userId;\n});\n\nModbusTcp.before.update(function(userId, doc, fieldNames, modifier, options) {\n\tmodifier.$set = modifier.$set || {};\n\tmodifier.$set.modifiedAt = new Date();\n\tmodifier.$set.modifiedBy = userId;\n\n\t\n});\n\nModbusTcp.before.remove(function(userId, doc) {\n\t\n});\n\nModbusTcp.after.insert(function(userId, doc) {\n\t\n});\n\nModbusTcp.after.update(function(userId, doc, fieldNames, modifier, options) {\n\t\n});\n\nModbusTcp.after.remove(function(userId, doc) {\n\t\n});\n","ModbusTcpRead.allow({\n\tinsert: function (userId, doc) {\n\t\treturn ModbusTcpRead.userCanInsert(userId, doc);\n\t},\n\n\tupdate: function (userId, doc, fields, modifier) {\n\t\treturn ModbusTcpRead.userCanUpdate(userId, doc);\n\t},\n\n\tremove: function (userId, doc) {\n\t\treturn ModbusTcpRead.userCanRemove(userId, doc);\n\t}\n});\n\nModbusTcpRead.before.insert(function(userId, doc) {\n\tdoc.createdAt = new Date();\n\tdoc.createdBy = userId;\n\tdoc.modifiedAt = doc.createdAt;\n\tdoc.modifiedBy = doc.createdBy;\n\n\t\n\tif(!doc.createdBy) doc.createdBy = userId;\n});\n\nModbusTcpRead.before.update(function(userId, doc, fieldNames, modifier, options) {\n\tmodifier.$set = modifier.$set || {};\n\tmodifier.$set.modifiedAt = new Date();\n\tmodifier.$set.modifiedBy = userId;\n\n\t\n});\n\nModbusTcpRead.before.remove(function(userId, doc) {\n\t\n});\n\nModbusTcpRead.after.insert(function(userId, doc) {\n\t\n});\n\nModbusTcpRead.after.update(function(userId, doc, fieldNames, modifier, options) {\n\t\n});\n\nModbusTcpRead.after.remove(function(userId, doc) {\n\t\n});\n","ModbusTcpReadCommand.allow({\n\tinsert: function (userId, doc) {\n\t\treturn ModbusTcpReadCommand.userCanInsert(userId, doc);\n\t},\n\n\tupdate: function (userId, doc, fields, modifier) {\n\t\treturn ModbusTcpReadCommand.userCanUpdate(userId, doc);\n\t},\n\n\tremove: function (userId, doc) {\n\t\treturn ModbusTcpReadCommand.userCanRemove(userId, doc);\n\t}\n});\n\nModbusTcpReadCommand.before.insert(function(userId, doc) {\n\tdoc.createdAt = new Date();\n\tdoc.createdBy = userId;\n\tdoc.modifiedAt = doc.createdAt;\n\tdoc.modifiedBy = doc.createdBy;\n\n\t\n\tif(!doc.createdBy) doc.createdBy = userId;\n});\n\nModbusTcpReadCommand.before.update(function(userId, doc, fieldNames, modifier, options) {\n\tmodifier.$set = modifier.$set || {};\n\tmodifier.$set.modifiedAt = new Date();\n\tmodifier.$set.modifiedBy = userId;\n\n\t\n});\n\nModbusTcpReadCommand.before.remove(function(userId, doc) {\n\t\n});\n\nModbusTcpReadCommand.after.insert(function(userId, doc) {\n\t\n});\n\nModbusTcpReadCommand.after.update(function(userId, doc, fieldNames, modifier, options) {\n\t\n});\n\nModbusTcpReadCommand.after.remove(function(userId, doc) {\n\t\n});\n","OneWire.allow({\n\tinsert: function (userId, doc) {\n\t\treturn OneWire.userCanInsert(userId, doc);\n\t},\n\n\tupdate: function (userId, doc, fields, modifier) {\n\t\treturn OneWire.userCanUpdate(userId, doc);\n\t},\n\n\tremove: function (userId, doc) {\n\t\treturn OneWire.userCanRemove(userId, doc);\n\t}\n});\n\nOneWire.before.insert(function(userId, doc) {\n\tdoc.createdAt = new Date();\n\tdoc.createdBy = userId;\n\tdoc.modifiedAt = doc.createdAt;\n\tdoc.modifiedBy = doc.createdBy;\n\n\t\n\tif(!doc.createdBy) doc.createdBy = userId;\n});\n\nOneWire.before.update(function(userId, doc, fieldNames, modifier, options) {\n\tmodifier.$set = modifier.$set || {};\n\tmodifier.$set.modifiedAt = new Date();\n\tmodifier.$set.modifiedBy = userId;\n\n\t\n});\n\nOneWire.before.remove(function(userId, doc) {\n\t\n});\n\nOneWire.after.insert(function(userId, doc) {\n\t\n});\n\nOneWire.after.update(function(userId, doc, fieldNames, modifier, options) {\n\tconsole.log(\"OneWire - afterUpdate\");\n\tvar message = doc.message;\n\tvar sensorArr = [];\n\tvar timestamp = new Date(message[\"time\"]);\n\tfor(var key in message){\n\t\tif(key !== \"time\"){\n\t\t\t  var sensorid = key;\n\t\t\t  for(var valuekey in message[key]){\n\t\t\t    var tempObj = {};  \n\t\t\t    tempObj[\"signal\"] = sensorid+\".\"+valuekey;\n\t\t\t    tempObj[\"value\"] = message[key][valuekey];\n\t\t\t    tempObj[\"timestamp\"] = timestamp;\n\t\t\t    sensorArr.push(tempObj);\n\t\t\t  }\n\t\t}\n\t}\n\n\tsensorArr.forEach(function(sensor,i){\n\t\tvar unit = \"\";\n\t\tif(sensor.signal.indexOf(\"tempC\") > -1){\n\t\t\tunit = \"Â°C\";\n\t\t}\n\t\telse if(sensor.signal.indexOf(\"counter\") > -1){\n\t\t\tunit = \"#\";\n\t\t}\n\t\telse if(sensor.signal.indexOf(\"hum\") > -1){\n\t\t\tunit = \"%RH\";\n\t\t}\n\t\tvar searchSignal = Signals.findOne({\"signal\":sensor.signal});\n\t\tif(searchSignal !== undefined){\n\t\t\tvar offsetA = searchSignal.offsetA;\n\t\t\tvar offsetB = searchSignal.offsetB;\n\t\t\tvar scale = searchSignal.scale;\n\t\t\tSignals.upsert({\"signal\":sensor.signal},{$set:{value: scale*(sensor.value+offsetA)+offsetB, raw: sensor.value, timestamp: sensor.timestamp}});\n\t\t}\n\t\telse{\n\t\t\tSignals.upsert({\"signal\":sensor.signal},{$set:{name: null,bus: \"onewire\",value: sensor.value, raw: sensor.value, timestamp: sensor.timestamp, unit: unit, offsetA: 0.0, offsetB: 0.0, scale: 1.0, hidden: false}});\n\t\t}\n\t});\n});\n\nOneWire.after.remove(function(userId, doc) {\n\t\n});\n","Signals.allow({\n\tinsert: function (userId, doc) {\n\t\treturn Signals.userCanInsert(userId, doc);\n\t},\n\n\tupdate: function (userId, doc, fields, modifier) {\n\t\treturn Signals.userCanUpdate(userId, doc);\n\t},\n\n\tremove: function (userId, doc) {\n\t\treturn Signals.userCanRemove(userId, doc);\n\t}\n});\n\nSignals.before.insert(function(userId, doc) {\n\tdoc.createdAt = new Date();\n\tdoc.createdBy = userId;\n\tdoc.modifiedAt = doc.createdAt;\n\tdoc.modifiedBy = doc.createdBy;\n\n\t\n\tif(!doc.createdBy) doc.createdBy = userId;\n});\n\nSignals.before.update(function(userId, doc, fieldNames, modifier, options) {\n\tmodifier.$set = modifier.$set || {};\n\tmodifier.$set.modifiedAt = new Date();\n\tmodifier.$set.modifiedBy = userId;\n\n\t\n});\n\nSignals.before.remove(function(userId, doc) {\n\t\n});\n\nSignals.after.insert(function(userId, doc) {\n\t\n});\n\nSignals.after.update(function(userId, doc, fieldNames, modifier, options) {\n\t\n});\n\nSignals.after.remove(function(userId, doc) {\n\t\n});\n","Router.map(function () {\n\n});\n","Meteor.publish(\"ethercat\", function () {\n    return Ethercat.find();\n});","Meteor.publish(\"ethercatunits\", function () {\n    return EthercatUnits.find();\n});","Meteor.publish(\"gpio\", function () {\n    return Gpio.find();\n});","Meteor.publish(\"mbus\", function () {\n    return Mbus.find();\n});","Meteor.publish(\"modbusrtu\", function () {\n    return ModbusRtu.find();\n});","Meteor.publish(\"modbusrturead\", function () {\n    return ModbusRtuRead.find();\n});","Meteor.publish(\"modbustcp\", function () {\n    return ModbusTcp.find();\n});","Meteor.publish(\"modbustcpread\", function () {\n    return ModbusTcpRead.find();\n});","Meteor.publish(\"modbustcpreadcommand\", function () {\n    return ModbusTcpReadCommand.find();\n});","Meteor.publish(\"onewire\", function () {\n    return OneWire.find();\n});","Meteor.publish(\"signals\", function () {\n    return Signals.find();\n});","var verifyEmail = false;\n\nAccounts.config({ sendVerificationEmail: verifyEmail });\n\nMeteor.startup(function() {\n\t// read environment variables from Meteor.settings\n\tif(Meteor.settings && Meteor.settings.env && _.isObject(Meteor.settings.env)) {\n\t\tfor(var variableName in Meteor.settings.env) {\n\t\t\tprocess.env[variableName] = Meteor.settings.env[variableName];\n\t\t}\n\t}\n\n\t//\n\t// Setup OAuth login service configuration (read from Meteor.settings)\n\t//\n\t// Your settings file should look like this:\n\t//\n\t// {\n\t//     \"oauth\": {\n\t//         \"google\": {\n\t//             \"clientId\": \"yourClientId\",\n\t//             \"secret\": \"yourSecret\"\n\t//         },\n\t//         \"github\": {\n\t//             \"clientId\": \"yourClientId\",\n\t//             \"secret\": \"yourSecret\"\n\t//         }\n\t//     }\n\t// }\n\t//\n\tif(Accounts && Accounts.loginServiceConfiguration && Meteor.settings && Meteor.settings.oauth && _.isObject(Meteor.settings.oauth)) {\n\t\t// google\n\t\tif(Meteor.settings.oauth.google && _.isObject(Meteor.settings.oauth.google)) {\n\t\t\t// remove old configuration\n\t\t\tAccounts.loginServiceConfiguration.remove({\n\t\t\t\tservice: \"google\"\n\t\t\t});\n\n\t\t\tvar settingsObject = Meteor.settings.oauth.google;\n\t\t\tsettingsObject.service = \"google\";\n\n\t\t\t// add new configuration\n\t\t\tAccounts.loginServiceConfiguration.insert(settingsObject);\n\t\t}\n\t\t// github\n\t\tif(Meteor.settings.oauth.github && _.isObject(Meteor.settings.oauth.github)) {\n\t\t\t// remove old configuration\n\t\t\tAccounts.loginServiceConfiguration.remove({\n\t\t\t\tservice: \"github\"\n\t\t\t});\n\n\t\t\tvar settingsObject = Meteor.settings.oauth.github;\n\t\t\tsettingsObject.service = \"github\";\n\n\t\t\t// add new configuration\n\t\t\tAccounts.loginServiceConfiguration.insert(settingsObject);\n\t\t}\n\t\t// linkedin\n\t\tif(Meteor.settings.oauth.linkedin && _.isObject(Meteor.settings.oauth.linkedin)) {\n\t\t\t// remove old configuration\n\t\t\tAccounts.loginServiceConfiguration.remove({\n\t\t\t\tservice: \"linkedin\"\n\t\t\t});\n\n\t\t\tvar settingsObject = Meteor.settings.oauth.linkedin;\n\t\t\tsettingsObject.service = \"linkedin\";\n\n\t\t\t// add new configuration\n\t\t\tAccounts.loginServiceConfiguration.insert(settingsObject);\n\t\t}\n\t\t// facebook\n\t\tif(Meteor.settings.oauth.facebook && _.isObject(Meteor.settings.oauth.facebook)) {\n\t\t\t// remove old configuration\n\t\t\tAccounts.loginServiceConfiguration.remove({\n\t\t\t\tservice: \"facebook\"\n\t\t\t});\n\n\t\t\tvar settingsObject = Meteor.settings.oauth.facebook;\n\t\t\tsettingsObject.service = \"facebook\";\n\n\t\t\t// add new configuration\n\t\t\tAccounts.loginServiceConfiguration.insert(settingsObject);\n\t\t}\n\t\t// twitter\n\t\tif(Meteor.settings.oauth.twitter && _.isObject(Meteor.settings.oauth.twitter)) {\n\t\t\t// remove old configuration\n\t\t\tAccounts.loginServiceConfiguration.remove({\n\t\t\t\tservice: \"twitter\"\n\t\t\t});\n\n\t\t\tvar settingsObject = Meteor.settings.oauth.twitter;\n\t\t\tsettingsObject.service = \"twitter\";\n\n\t\t\t// add new configuration\n\t\t\tAccounts.loginServiceConfiguration.insert(settingsObject);\n\t\t}\n\t\t// meteor\n\t\tif(Meteor.settings.oauth.meteor && _.isObject(Meteor.settings.oauth.meteor)) {\n\t\t\t// remove old configuration\n\t\t\tAccounts.loginServiceConfiguration.remove({\n\t\t\t\tservice: \"meteor-developer\"\n\t\t\t});\n\n\t\t\tvar settingsObject = Meteor.settings.oauth.meteor;\n\t\t\tsettingsObject.service = \"meteor-developer\";\n\n\t\t\t// add new configuration\n\t\t\tAccounts.loginServiceConfiguration.insert(settingsObject);\n\t\t}\n\t}\n\n\tvar url = \"mqtt://94.234.165.147\";\n    Mbus.mqttConnect(url, [\"/mbus/data\"], {\n        \"username\": \"marcus\",\n        \"password\": \"test\"\n    });\n    OneWire.mqttConnect(url, [\"/1-wire/data\"], {\n        \"username\": \"marcus\",\n        \"password\": \"test\"\n    });\n    Ethercat.mqttConnect(url, [\"/ethercat/data\"], {\n        \"username\": \"marcus\",\n        \"password\": \"test\"\n    });\n    EthercatUnits.mqttConnect(url, [\"/ethercat/units\"], {\n        \"username\": \"marcus\",\n        \"password\": \"test\"\n    });\n    Gpio.mqttConnect(url, [\"/gpio/units\"], {\n        \"username\": \"marcus\",\n        \"password\": \"test\"\n    });\n    ModbusTcp.mqttConnect(url, [\"/modbus-tcp/data\"], {\n        \"username\": \"marcus\",\n        \"password\": \"test\"\n    });\n    ModbusTcpRead.mqttConnect(url, [\"\"], {\n        \"username\": \"marcus\",\n        \"password\": \"test\"\n    });\n    ModbusRtu.mqttConnect(url, [\"/modbus-rtu/data\"], {\n        \"username\": \"marcus\",\n        \"password\": \"test\"\n    });\n    ModbusRtuRead.mqttConnect(url, [\"/modbus-rtu/read\"], {\n        \"username\": \"marcus\",\n        \"password\": \"test\"\n    });\n    // EtherCatUnits.mqttConnect(url, [\"/modbus/units\"], {\n    //     \"username\": \"marcus\",\n    //     \"password\": \"test\"\n    // });\n\n\t// Meteor.setInterval(function(){\n\n\t// \t//Send Modbus TCP commands\n\t// \tvar commands = ModbusTcpReadCommand.find().fetch();\n\t// \tcommands.forEach(function(c,i){\n\t// \t\tdelete c[\"_id\"];\n\t// \t\tModbusTcpRead.insert({topic: \"/modbus-tcp/read\", message: {commands:[c]}, broadcast: true});\n\t// \t});\n\t// }, 5000);\n\t\n});\n\nMeteor.methods({\n\t\"createUserAccount\": function(options) {\n\t\tif(!Users.isAdmin(Meteor.userId())) {\n\t\t\tthrow new Meteor.Error(403, \"Access denied.\");\n\t\t}\n\n\t\tvar userOptions = {};\n\t\tif(options.username) userOptions.username = options.username;\n\t\tif(options.email) userOptions.email = options.email;\n\t\tif(options.password) userOptions.password = options.password;\n\t\tif(options.profile) userOptions.profile = options.profile;\n\t\tif(options.profile && options.profile.email) userOptions.email = options.profile.email;\n\n\t\tAccounts.createUser(userOptions);\n\t},\n\t\"updateUserAccount\": function(userId, options) {\n\t\t// only admin or users own profile\n\t\tif(!(Users.isAdmin(Meteor.userId()) || userId == Meteor.userId())) {\n\t\t\tthrow new Meteor.Error(403, \"Access denied.\");\n\t\t}\n\n\t\t// non-admin user can change only profile\n\t\tif(!Users.isAdmin(Meteor.userId())) {\n\t\t\tvar keys = Object.keys(options);\n\t\t\tif(keys.length !== 1 || !options.profile) {\n\t\t\t\tthrow new Meteor.Error(403, \"Access denied.\");\n\t\t\t}\n\t\t}\n\n\t\tvar userOptions = {};\n\t\tif(options.username) userOptions.username = options.username;\n\t\tif(options.email) userOptions.email = options.email;\n\t\tif(options.password) userOptions.password = options.password;\n\t\tif(options.profile) userOptions.profile = options.profile;\n\n\t\tif(options.profile && options.profile.email) userOptions.email = options.profile.email;\n\t\tif(options.roles) userOptions.roles = options.roles;\n\n\t\tif(userOptions.email) {\n\t\t\tvar email = userOptions.email;\n\t\t\tdelete userOptions.email;\n\t\t\tuserOptions.emails = [{ address: email }];\n\t\t}\n\n\t\tvar password = \"\";\n\t\tif(userOptions.password) {\n\t\t\tpassword = userOptions.password;\n\t\t\tdelete userOptions.password;\n\t\t}\n\n\t\tif(userOptions) {\n\t\t\tUsers.update(userId, { $set: userOptions });\n\t\t}\n\n\t\tif(password) {\n\t\t\tAccounts.setPassword(userId, password);\n\t\t}\n\t},\t\n\t\"sendMail\": function(options) {\n\t\tthis.unblock();\n\n\t\tEmail.send(options);\n\t},\n\t\"updateSignal\": function(signalId, values) {\n\t\tconsole.log(\"updateSignal\");\n\t\tif(!(Users.isAdmin(Meteor.userId()))) {\n\t\t\tthrow new Meteor.Error(403, \"Access denied. You need to be an administrator to update a signal.\");\n\t\t}\n\n\t\tvar signal = Signals.findOne(signalId);\n\t\tconsole.log(signal);\n\t\tif(signal){\n\t\t\tvar raw = signal.raw;\n\t\t\tvar offsetA = parseFloat(values.signal.offsetA);\n\t\t\tvar offsetB = parseFloat(values.signal.offsetB);\n\t\t\tvar scale = parseFloat(values.signal.scale);\n\t\t\tvar alarmH = parseFloat(values.signal.alarmH);\n\t\t\tvar alarmL = parseFloat(values.signal.alarmL);\n\t\t\tif(alarmH < alarmL){\n\t\t\t\tthrow new Meteor.Error(601, \"Alarm high cannot be less than alarm low.\");\n\t\t\t}\n\t\t\telse if(alarmL > alarmH){\n\t\t\t\tthrow new Meteor.Error(602, \"Alarm low cannot be greater than alarm high.\");\t\n\t\t\t}\n\t\t\telse if(alarmL == alarmH){\n\t\t\t\tthrow new Meteor.Error(603, \"Alarm low cannot be equal to alarm high.\");\t\t\n\t\t\t}\n\n\t\t\tsetObj = {\n\t\t\t\tname: values.signal.name,\n\t\t\t\toffsetA: offsetA,\n\t\t\t\toffsetB: offsetB,\n\t\t\t\tscale: scale,\n\t\t\t\tunit: values.signal.unit,\n\t\t\t\tvalue: scale*(raw+offsetA)+offsetB,\n\t\t\t\thidden: values.signal.hidden,\n\t\t\t\talarmH: alarmH,\n\t\t\t\talarmL: alarmL\n\t\t\t};\n\n\t\t\tSignals.update(signalId,{$set: setObj});\n\t\t}\n\t\telse{\n\t\t\tthrow new Meteor.Error(100, \"Signal does not exist\");\n\t\t}\n\t},\n\t\"addModbusTcpCommand\": function(values){\n\t\tif(!(Users.isAdmin(Meteor.userId()))) {\n\t\t\tthrow new Meteor.Error(403, \"Access denied. You need to be an administrator to add commands.\");\n\t\t}\n\n\t\tvar send = {\n\t\t\tip: values.command.ip,\n\t\t\taddr: 1,\n\t\t\treg: parseInt(values.command.register),\n\t\t\toffset: parseInt(values.command.offset),\n\t\t\tlen: parseInt(values.command.length)\n\t\t}\n\n\t\tModbusTcpReadCommand.upsert(send,send);\n\t\tconsole.log(\"Got tcp command\",values);\n\t}\n});\n\nAccounts.onCreateUser(function (options, user) {\n\tuser.roles = [\"user\"];\n\n\tif(options.profile) {\n\t\tuser.profile = options.profile;\n\t}\n\n\t\n\treturn user;\n});\n\nAccounts.validateLoginAttempt(function(info) {\n\n\t// reject users with role \"blocked\"\n\tif(info.user && Users.isInRole(info.user._id, \"blocked\")) {\n\t\tthrow new Meteor.Error(403, \"Your account is blocked.\");\n\t}\n\n  if(verifyEmail && info.user && info.user.emails && info.user.emails.length && !info.user.emails[0].verified ) {\n\t\t\tthrow new Meteor.Error(499, \"E-mail not verified.\");\n  }\n\n\treturn true;\n});\n\n\nUsers.before.insert(function(userId, doc) {\n\tif(doc.emails && doc.emails[0] && doc.emails[0].address) {\n\t\tdoc.profile = doc.profile || {};\n\t\tdoc.profile.email = doc.emails[0].address;\n\t} else {\n\t\t// oauth\n\t\tif(doc.services) {\n\t\t\t// google e-mail\n\t\t\tif(doc.services.google && doc.services.google.email) {\n\t\t\t\tdoc.profile = doc.profile || {};\n\t\t\t\tdoc.profile.email = doc.services.google.email;\n\t\t\t} else {\n\t\t\t\t// github e-mail\n\t\t\t\tif(doc.services.github && doc.services.github.accessToken) {\n\t\t\t\t\tvar github = new GitHub({\n\t\t\t\t\t\tversion: \"3.0.0\",\n\t\t\t\t\t\ttimeout: 5000\n\t\t\t\t\t});\n\n\t\t\t\t\tgithub.authenticate({\n\t\t\t\t\t\ttype: \"oauth\",\n\t\t\t\t\t\ttoken: doc.services.github.accessToken\n\t\t\t\t\t});\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\tvar result = github.user.getEmails({});\n\t\t\t\t\t\tvar email = _.findWhere(result, { primary: true });\n\t\t\t\t\t\tif(!email && result.length && _.isString(result[0])) {\n\t\t\t\t\t\t\temail = { email: result[0] };\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif(email) {\n\t\t\t\t\t\t\tdoc.profile = doc.profile || {};\n\t\t\t\t\t\t\tdoc.profile.email = email.email;\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch(e) {\n\t\t\t\t\t\tconsole.log(e);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// linkedin email\n\t\t\t\t\tif(doc.services.linkedin && doc.services.linkedin.emailAddress) {\n\t\t\t\t\t\tdoc.profile = doc.profile || {};\n\t\t\t\t\t\tdoc.profile.name = doc.services.linkedin.firstName + \" \" + doc.services.linkedin.lastName;\n\t\t\t\t\t\tdoc.profile.email = doc.services.linkedin.emailAddress;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif(doc.services.facebook && doc.services.facebook.email) {\n\t\t\t\t\t\t\tdoc.profile = doc.profile || {};\n\t\t\t\t\t\t\tdoc.profile.email = doc.services.facebook.email;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif(doc.services.twitter && doc.services.twitter.email) {\n\t\t\t\t\t\t\t\tdoc.profile = doc.profile || {};\n\t\t\t\t\t\t\t\tdoc.profile.email = doc.services.twitter.email;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif(doc.services[\"meteor-developer\"] && doc.services[\"meteor-developer\"].emails && doc.services[\"meteor-developer\"].emails.length) {\n\t\t\t\t\t\t\t\t\tdoc.profile = doc.profile || {};\n\t\t\t\t\t\t\t\t\tdoc.profile.email = doc.services[\"meteor-developer\"].emails[0].address;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n});\n\nUsers.before.update(function(userId, doc, fieldNames, modifier, options) {\n\tif(modifier.$set && modifier.$set.emails && modifier.$set.emails.length && modifier.$set.emails[0].address) {\n\t\tmodifier.$set.profile.email = modifier.$set.emails[0].address;\n\t}\n});\n\nAccounts.onLogin(function (info) {\n\t\n});\n\nAccounts.urls.resetPassword = function (token) {\n\treturn Meteor.absoluteUrl('reset_password/' + token);\n};\n\nAccounts.urls.verifyEmail = function (token) {\n\treturn Meteor.absoluteUrl('verify_email/' + token);\n};\n"]}